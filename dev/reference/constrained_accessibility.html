<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Constrained accessibility — constrained_accessibility • accessibility</title><script src="../lightswitch.js"></script><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Constrained accessibility — constrained_accessibility"><meta name="description" content='Calculates accessibility using constrained gravity models, as proposed in
Soukhov et al. (2025)
:
"total": Allocates total opportunities proportionally based on travel impedance.
"singly": Allocates opportunities proportionally, constrained on one side (demand or supply).
"doubly": Allocates flows so origin totals equal demand and destination totals equal supply.
Please see the Details section for more information.


This function is generic over any kind of numeric travel cost,
such as distance, time and money.'><meta property="og:description" content='Calculates accessibility using constrained gravity models, as proposed in
Soukhov et al. (2025)
:
"total": Allocates total opportunities proportionally based on travel impedance.
"singly": Allocates opportunities proportionally, constrained on one side (demand or supply).
"doubly": Allocates flows so origin totals equal demand and destination totals equal supply.
Please see the Details section for more information.


This function is generic over any kind of numeric travel cost,
such as distance, time and money.'><meta property="og:image" content="https://ipeagit.github.io/accessibility/logo.png"><meta name="robots" content="noindex"></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top " aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">accessibility</a>

    <small class="nav-text text-danger me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="In-development version">1.4.0.9000</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="nav-item"><a class="nav-link" href="../articles/accessibility.html">Get started</a></li>
<li class="active nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles"><li><a class="dropdown-item" href="../articles/decay_functions.html">Decay functions</a></li>
    <li><a class="dropdown-item" href="../articles/inequality_and_poverty.html">Calculating accessibility inequality and poverty</a></li>
  </ul></li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json"></form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/ipeaGIT/accessibility/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-lightswitch" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true" aria-label="Light switch"><span class="fa fa-sun"></span></button>
  <ul class="dropdown-menu dropdown-menu-end" aria-labelledby="dropdown-lightswitch"><li><button class="dropdown-item" data-bs-theme-value="light"><span class="fa fa-sun"></span> Light</button></li>
    <li><button class="dropdown-item" data-bs-theme-value="dark"><span class="fa fa-moon"></span> Dark</button></li>
    <li><button class="dropdown-item" data-bs-theme-value="auto"><span class="fa fa-adjust"></span> Auto</button></li>
  </ul></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.png" class="logo" alt=""><h1>Constrained accessibility</h1>
      <small class="dont-index">Source: <a href="https://github.com/ipeaGIT/accessibility/blob/main/R/constrained_accessibility.R" class="external-link"><code>R/constrained_accessibility.R</code></a></small>
      <div class="d-none name"><code>constrained_accessibility.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>Calculates accessibility using constrained gravity models, as proposed in
Soukhov et al. (2025)
:</p><ul><li><p><code>"total"</code>: Allocates total opportunities proportionally based on travel impedance.</p></li>
<li><p><code>"singly"</code>: Allocates opportunities proportionally, constrained on one side (demand or supply).</p></li>
<li><p><code>"doubly"</code>: Allocates flows so origin totals equal demand and destination totals equal supply.
Please see the Details section for more information.</p></li>
</ul><p>This function is generic over any kind of numeric travel cost,
such as distance, time and money.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">constrained_accessibility</span><span class="op">(</span></span>
<span>  <span class="va">constraint</span>,</span>
<span>  <span class="va">travel_matrix</span>,</span>
<span>  <span class="va">land_use_data</span>,</span>
<span>  <span class="va">travel_cost</span>,</span>
<span>  <span class="va">decay_function</span>,</span>
<span>  demand <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  supply <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  return_demand_side <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  error_threshold <span class="op">=</span> <span class="fl">0.001</span>,</span>
<span>  improvement_threshold <span class="op">=</span> <span class="fl">1e-06</span>,</span>
<span>  max_iterations <span class="op">=</span> <span class="fl">1000</span>,</span>
<span>  group_by <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/character.html" class="external-link">character</a></span><span class="op">(</span><span class="fl">0</span><span class="op">)</span>,</span>
<span>  fill_missing_ids <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  detailed_results <span class="op">=</span> <span class="cn">FALSE</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>


<dl><dt id="arg-constraint">constraint<a class="anchor" aria-label="anchor" href="#arg-constraint"></a></dt>
<dd><p>A string. One of <code>"total"</code>, <code>"singly"</code>, or <code>"doubly"</code>.</p></dd>


<dt id="arg-travel-matrix">travel_matrix<a class="anchor" aria-label="anchor" href="#arg-travel-matrix"></a></dt>
<dd><p>A data frame. The travel matrix describing the costs
(i.e. travel time, distance, monetary cost, etc.) between the origins and
destinations in the study area. Must contain the columns <code>from_id</code>, <code>to_id</code>
and any others specified in <code>travel_cost</code>.</p></dd>


<dt id="arg-land-use-data">land_use_data<a class="anchor" aria-label="anchor" href="#arg-land-use-data"></a></dt>
<dd><p>A data frame. The distribution of opportunities within
the study area cells. Must contain the columns <code>id</code> and any others
specified in <code>opportunity</code>.</p></dd>


<dt id="arg-travel-cost">travel_cost<a class="anchor" aria-label="anchor" href="#arg-travel-cost"></a></dt>
<dd><p>A string. The name of the column in <code>travel_matrix</code>
with the travel cost between origins and destinations.</p></dd>


<dt id="arg-decay-function">decay_function<a class="anchor" aria-label="anchor" href="#arg-decay-function"></a></dt>
<dd><p>A <code>fuction</code> that converts travel cost into an
impedance factor used to weight opportunities. This function should take a
<code>numeric</code> vector and also return a <code>numeric</code> vector as output, with the
same length as the input. For convenience, the package currently includes
the following functions: <code><a href="decay_binary.html">decay_binary()</a></code>, <code><a href="decay_exponential.html">decay_exponential()</a></code>,
<code><a href="decay_power.html">decay_power()</a></code> and <code><a href="decay_stepped.html">decay_stepped()</a></code>. See the documentation of each decay
function for more details.</p></dd>


<dt id="arg-demand">demand<a class="anchor" aria-label="anchor" href="#arg-demand"></a></dt>
<dd><p>A string. The name of the column in <code>land_use_data</code> with the
number of opportunity-demanders at each origin (e.g., people) that will be
considered.</p></dd>


<dt id="arg-supply">supply<a class="anchor" aria-label="anchor" href="#arg-supply"></a></dt>
<dd><p>A string. The name of the column in <code>land_use_data</code> with the
number of opportunity supply at each destination (e.g., jobs, school-seats)
that will be considered.</p></dd>


<dt id="arg-return-demand-side">return_demand_side<a class="anchor" aria-label="anchor" href="#arg-return-demand-side"></a></dt>
<dd><p>Logical for <code>"total"</code> and <code>"singly"</code>, must be <code>NULL</code> for <code>"doubly"</code>.</p></dd>


<dt id="arg-error-threshold">error_threshold<a class="anchor" aria-label="anchor" href="#arg-error-threshold"></a></dt>
<dd><p>Numeric. Convergence criterion for doubly-constrained case.</p></dd>


<dt id="arg-improvement-threshold">improvement_threshold<a class="anchor" aria-label="anchor" href="#arg-improvement-threshold"></a></dt>
<dd><p>Numeric. Convergence criterion for improvement.</p></dd>


<dt id="arg-max-iterations">max_iterations<a class="anchor" aria-label="anchor" href="#arg-max-iterations"></a></dt>
<dd><p>Integer. Maximum iterations for doubly-constrained calibration.</p></dd>


<dt id="arg-group-by">group_by<a class="anchor" aria-label="anchor" href="#arg-group-by"></a></dt>
<dd><p>A <code>character</code> vector. When not <code>character(0)</code> (the default),
indicates the <code>travel_matrix</code> columns that should be used to group the
accessibility estimates by. For example, if <code>travel_matrix</code> includes a
departure time column, that specifies the departure time of each entry in
the data frame, passing <code>"departure_time"</code> to this parameter results in
accessibility estimates grouped by origin and by departure time.</p></dd>


<dt id="arg-fill-missing-ids">fill_missing_ids<a class="anchor" aria-label="anchor" href="#arg-fill-missing-ids"></a></dt>
<dd><p>A <code>logical</code>. When calculating grouped accessibility
estimates (i.e. when <code>by_col</code> is not <code>NULL</code>), some combinations of groups
and origins may be missing. For example, if a single trip can depart from
origin <code>A</code> at 7:15am and reach destination <code>B</code> within 55 minutes, but no
trips departing from <code>A</code> at 7:30am can be completed at all, this second
combination will not be included in the output. When <code>TRUE</code> (the default),
the function identifies which combinations would be left out and fills
their respective accessibility values with 0, which incurs in a
performance penalty.</p></dd>


<dt id="arg-detailed-results">detailed_results<a class="anchor" aria-label="anchor" href="#arg-detailed-results"></a></dt>
<dd><p>Logical. Whether to return detailed OD-level results.</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="details">Details<a class="anchor" aria-label="anchor" href="#details"></a></h2>


<p>This function covers the family of constrained accessibility measures
proposed in Soukhov et al. (2025)
.</p><div class="section">
<h3 id="total-constrained-accessibility">Total constrained accessibility<a class="anchor" aria-label="anchor" href="#total-constrained-accessibility"></a></h3>


<p>Sum of accessibility equals total opportunities (supply) in the region.
It allocates total opportunities in the region proportionally based on travel
impedance. Uses the logic of a total ~(or unconstrained by Wilon's terms)~
constraint. Returns values as either <code>demand</code> or <code>supply</code>. When
<code>return_demand_side = TRUE</code> (market potential variant) is also available.</p>
</div>

<div class="section">
<h3 id="singly-constrained-accessibility">Singly constrained accessibility<a class="anchor" aria-label="anchor" href="#singly-constrained-accessibility"></a></h3>


<p>Allocates opportunities at each destination proportionally based on travel
impedance and population at the origin. Uses the logic of single constraint
from Wilson (1971)
. Returns values as
either 'demand' or 'supply'. Supply-constrained (destination totals fixed)
when <code>return_demand_side = FALSE</code>. In either case, totals match either the
demand at each origin or supply at each destination, depending on variant.</p>
</div>

<div class="section">
<h3 id="doubly-constrained-accessibility">Doubly constrained accessibility<a class="anchor" aria-label="anchor" href="#doubly-constrained-accessibility"></a></h3>


<p>Calculates accessibility using doubly-constrained gravity model of
Wilson (1971)
. This measure allocates
flows between origins and destinations such that origin totals equal demand
and destination totals equal supply. Iterative proportional fitting updates
(A_i) and (B_j) until convergence. This ensures that row sums equal (O_i)
(demand) and column sums equal (D_j) (supply). Note, only OD-level outputs
are available (as aggregate outputs just match inputs).</p>
</div>

    </div>
    <div class="section level2">
    <h2 id="references">References<a class="anchor" aria-label="anchor" href="#references"></a></h2>
    <p>Soukhov A, Pereira RH, Higgins CD, Páez A (2025).
“A family of accessibility measures derived from spatial interaction principles.”
<em>PLoS One</em>, <b>20</b>(11), e0335951.<br><br> Wilson AG (1971).
“A family of spatial interaction models, and associated developments.”
<em>Environment and Planning A</em>, <b>3</b>(1), 1–32.</p>
    </div>
    <div class="section level2">
    <h2 id="see-also">See also<a class="anchor" aria-label="anchor" href="#see-also"></a></h2>
    <div class="dont-index"><p>Other Constrained accessibility:
<code><a href="spatial_availability.html">spatial_availability()</a></code></p></div>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="co"># Load demo data shipped with the package</span></span></span>
<span class="r-in"><span><span class="va">data_dir</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/system.file.html" class="external-link">system.file</a></span><span class="op">(</span><span class="st">"extdata"</span>, package <span class="op">=</span> <span class="st">"accessibility"</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">travel_matrix</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/readRDS.html" class="external-link">readRDS</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/file.path.html" class="external-link">file.path</a></span><span class="op">(</span><span class="va">data_dir</span>, <span class="st">"travel_matrix.rds"</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">land_use_data</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/readRDS.html" class="external-link">readRDS</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/file.path.html" class="external-link">file.path</a></span><span class="op">(</span><span class="va">data_dir</span>, <span class="st">"land_use_data.rds"</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Total-constrained (supply-side)</span></span></span>
<span class="r-in"><span><span class="fu">constrained_accessibility</span><span class="op">(</span></span></span>
<span class="r-in"><span>  constraint <span class="op">=</span>   <span class="st">"total"</span>,</span></span>
<span class="r-in"><span>  travel_matrix <span class="op">=</span> <span class="va">travel_matrix</span>,</span></span>
<span class="r-in"><span>  land_use_data <span class="op">=</span> <span class="va">land_use_data</span>,</span></span>
<span class="r-in"><span>  travel_cost     <span class="op">=</span> <span class="st">"travel_time"</span>,</span></span>
<span class="r-in"><span>  decay_function  <span class="op">=</span> <span class="fu"><a href="decay_exponential.html">decay_exponential</a></span><span class="op">(</span><span class="fl">0.1</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>  demand          <span class="op">=</span> <span class="cn">NULL</span>,</span></span>
<span class="r-in"><span>  supply          <span class="op">=</span> <span class="st">"jobs"</span>,</span></span>
<span class="r-in"><span>  return_demand_side <span class="op">=</span> <span class="cn">FALSE</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>              from_id   supply</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>               &lt;char&gt;    &lt;num&gt;</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   1: 89a88cdb57bffff 263.8175</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   2: 89a88cdb597ffff 264.7306</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   3: 89a88cdb5b3ffff 319.5332</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   4: 89a88cdb5cfffff 428.2523</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   5: 89a88cd909bffff 291.7166</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  ---                         </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 894: 89a881acda3ffff 280.1091</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 895: 89a88cdb543ffff 697.2299</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 896: 89a88cda667ffff 346.8143</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 897: 89a88cd900fffff 113.1569</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 898: 89a881aebafffff   0.0000</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Singly-constrained (demand-side)</span></span></span>
<span class="r-in"><span><span class="fu">constrained_accessibility</span><span class="op">(</span></span></span>
<span class="r-in"><span>  constraint <span class="op">=</span>   <span class="st">"singly"</span>,</span></span>
<span class="r-in"><span>  travel_matrix <span class="op">=</span> <span class="va">travel_matrix</span>,</span></span>
<span class="r-in"><span>  land_use_data <span class="op">=</span> <span class="va">land_use_data</span>,</span></span>
<span class="r-in"><span>  travel_cost     <span class="op">=</span> <span class="st">"travel_time"</span>,</span></span>
<span class="r-in"><span>  decay_function  <span class="op">=</span> <span class="fu"><a href="decay_exponential.html">decay_exponential</a></span><span class="op">(</span><span class="fl">0.1</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>  demand          <span class="op">=</span> <span class="st">"population"</span>,</span></span>
<span class="r-in"><span>  supply          <span class="op">=</span> <span class="st">"jobs"</span>,</span></span>
<span class="r-in"><span>  return_demand_side <span class="op">=</span> <span class="cn">TRUE</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>                to_id    demand</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>               &lt;char&gt;     &lt;num&gt;</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   1: 89a88cdb57bffff  67.95218</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   2: 89a88cdb597ffff 661.02294</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   3: 89a88cdb5b3ffff 228.67413</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   4: 89a88cdb5cfffff  88.35283</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   5: 89a88cd909bffff   0.00000</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  ---                          </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 894: 89a881ae92fffff   0.00000</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 895: 89a881ae923ffff   0.00000</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 896: 89a881ae9afffff   0.00000</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 897: 89a88cd8407ffff  36.87961</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 898: 89a881aebafffff       NaN</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Doubly-constrained: use a small toy dataset with matching totals</span></span></span>
<span class="r-in"><span><span class="va">tm_small</span> <span class="op">&lt;-</span> <span class="fu">data.table</span><span class="fu">::</span><span class="fu"><a href="https://rdatatable.gitlab.io/data.table/reference/data.table.html" class="external-link">data.table</a></span><span class="op">(</span></span></span>
<span class="r-in"><span>  <span class="fu"><a href="https://rdrr.io/r/base/expand.grid.html" class="external-link">expand.grid</a></span><span class="op">(</span>from_id <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"1"</span>,<span class="st">"2"</span>,<span class="st">"3"</span><span class="op">)</span>, to_id <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"1"</span>,<span class="st">"2"</span>,<span class="st">"3"</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">tm_small</span><span class="op">[</span>, <span class="va">travel_time</span> <span class="op">:=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">10</span>, <span class="fl">30</span>, <span class="fl">15</span>, <span class="fl">30</span>, <span class="fl">10</span>, <span class="fl">25</span>, <span class="fl">15</span>, <span class="fl">25</span>, <span class="fl">10</span><span class="op">)</span><span class="op">]</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    from_id  to_id travel_time</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     &lt;fctr&gt; &lt;fctr&gt;       &lt;num&gt;</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1:       1      1          10</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2:       2      1          30</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3:       3      1          15</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4:       1      2          30</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 5:       2      2          10</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 6:       3      2          25</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 7:       1      3          15</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 8:       2      3          25</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 9:       3      3          10</span>
<span class="r-in"><span><span class="va">lu_small</span> <span class="op">&lt;-</span> <span class="fu">data.table</span><span class="fu">::</span><span class="fu"><a href="https://rdatatable.gitlab.io/data.table/reference/data.table.html" class="external-link">data.table</a></span><span class="op">(</span></span></span>
<span class="r-in"><span>  id         <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"1"</span>,<span class="st">"2"</span>,<span class="st">"3"</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>  population <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">4</span>, <span class="fl">10</span>, <span class="fl">6</span><span class="op">)</span>,   <span class="co"># sum = 20</span></span></span>
<span class="r-in"><span>  jobs       <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">7</span>,  <span class="fl">5</span>,  <span class="fl">8</span><span class="op">)</span>   <span class="co"># sum = 20</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="fu">constrained_accessibility</span><span class="op">(</span></span></span>
<span class="r-in"><span>  constraint <span class="op">=</span> <span class="st">"doubly"</span>,</span></span>
<span class="r-in"><span>  travel_matrix <span class="op">=</span> <span class="va">tm_small</span>,</span></span>
<span class="r-in"><span>  land_use_data <span class="op">=</span> <span class="va">lu_small</span>,</span></span>
<span class="r-in"><span>  travel_cost     <span class="op">=</span> <span class="st">"travel_time"</span>,</span></span>
<span class="r-in"><span>  decay_function  <span class="op">=</span> <span class="fu"><a href="decay_exponential.html">decay_exponential</a></span><span class="op">(</span><span class="fl">0.1</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>  demand          <span class="op">=</span> <span class="st">"population"</span>,</span></span>
<span class="r-in"><span>  supply          <span class="op">=</span> <span class="st">"jobs"</span>,</span></span>
<span class="r-in"><span>  return_demand_side <span class="op">=</span> <span class="cn">NULL</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-wrn co"><span class="r-pr">#&gt;</span> <span class="warning">Warning: </span>Aggregated results equal marginals (O_i or D_j). Interpret with caution.</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>        id  flow</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    &lt;fctr&gt; &lt;num&gt;</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1:      1     4</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2:      2    10</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3:      3     6</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4:      1     7</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 5:      2     5</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 6:      3     8</span>
<span class="r-in"><span></span></span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Rafael H. M. Pereira, Daniel Herszenhut, Ipea - Institute for Applied Economic Research.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.2.0.</p>
</div>

    </footer></div>





  </body></html>

