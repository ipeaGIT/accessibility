<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Minimum travel cost to closest N number of opportunities — cost_to_closest • accessibility</title><!-- favicons --><link rel="icon" type="image/png" sizes="48x48" href="../favicon-48x48.png"><link rel="icon" type="”image/svg+xml”" href="../favicon.svg"><link rel="apple-touch-icon" sizes="180x180" href="../apple-touch-icon.png"><link rel="icon" sizes="any" href="../favicon.ico"><link rel="manifest" href="../site.webmanifest"><script src="../lightswitch.js"></script><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Minimum travel cost to closest N number of opportunities — cost_to_closest"><meta name="description" content="Calculates the minimum travel cost to the closest N number of opportunities.
This function is generic over any kind of numeric travel cost,
such as distance, time and money."><meta property="og:description" content="Calculates the minimum travel cost to the closest N number of opportunities.
This function is generic over any kind of numeric travel cost,
such as distance, time and money."><meta property="og:image" content="https://ipeagit.github.io/accessibility/logo.png"></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top " aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">accessibility</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="Released version">1.4.0</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="nav-item"><a class="nav-link" href="../articles/accessibility.html">Get started</a></li>
<li class="active nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles"><li><a class="dropdown-item" href="../articles/decay_functions.html">Decay functions</a></li>
    <li><a class="dropdown-item" href="../articles/inequality_and_poverty.html">Calculating accessibility inequality and poverty</a></li>
  </ul></li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json"></form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/ipeaGIT/accessibility/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-lightswitch" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true" aria-label="Light switch"><span class="fa fa-sun"></span></button>
  <ul class="dropdown-menu dropdown-menu-end" aria-labelledby="dropdown-lightswitch"><li><button class="dropdown-item" data-bs-theme-value="light"><span class="fa fa-sun"></span> Light</button></li>
    <li><button class="dropdown-item" data-bs-theme-value="dark"><span class="fa fa-moon"></span> Dark</button></li>
    <li><button class="dropdown-item" data-bs-theme-value="auto"><span class="fa fa-adjust"></span> Auto</button></li>
  </ul></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.png" class="logo" alt=""><h1>Minimum travel cost to closest N number of opportunities</h1>
      <small class="dont-index">Source: <a href="https://github.com/ipeaGIT/accessibility/blob/HEAD/R/cost_to_closest.R" class="external-link"><code>R/cost_to_closest.R</code></a></small>
      <div class="d-none name"><code>cost_to_closest.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>Calculates the minimum travel cost to the closest N number of opportunities.</p>
<p>This function is generic over any kind of numeric travel cost,
such as distance, time and money.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">cost_to_closest</span><span class="op">(</span></span>
<span>  <span class="va">travel_matrix</span>,</span>
<span>  <span class="va">land_use_data</span>,</span>
<span>  <span class="va">opportunity</span>,</span>
<span>  <span class="va">travel_cost</span>,</span>
<span>  n <span class="op">=</span> <span class="fl">1</span>,</span>
<span>  group_by <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/character.html" class="external-link">character</a></span><span class="op">(</span><span class="fl">0</span><span class="op">)</span>,</span>
<span>  active <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  fill_missing_ids <span class="op">=</span> <span class="cn">TRUE</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>


<dl><dt id="arg-travel-matrix">travel_matrix<a class="anchor" aria-label="anchor" href="#arg-travel-matrix"></a></dt>
<dd><p>A data frame. The travel matrix describing the costs
(i.e. travel time, distance, monetary cost, etc.) between the origins and
destinations in the study area. Must contain the columns <code>from_id</code>, <code>to_id</code>
and any others specified in <code>travel_cost</code>.</p></dd>


<dt id="arg-land-use-data">land_use_data<a class="anchor" aria-label="anchor" href="#arg-land-use-data"></a></dt>
<dd><p>A data frame. The distribution of opportunities within
the study area cells. Must contain the columns <code>id</code> and any others
specified in <code>opportunity</code>.</p></dd>


<dt id="arg-opportunity">opportunity<a class="anchor" aria-label="anchor" href="#arg-opportunity"></a></dt>
<dd><p>A string. The name of the column in <code>land_use_data</code>
with the number of opportunities/resources/services to be considered when
calculating accessibility levels.</p></dd>


<dt id="arg-travel-cost">travel_cost<a class="anchor" aria-label="anchor" href="#arg-travel-cost"></a></dt>
<dd><p>A string. The name of the column in <code>travel_matrix</code>
with the travel cost between origins and destinations.</p></dd>


<dt id="arg-n">n<a class="anchor" aria-label="anchor" href="#arg-n"></a></dt>
<dd><p>A <code>numeric</code> vector. The minimum number of opportunities that should
be considered. Defaults to 1. If more than one value is provided, the
output includes an extra column specifying the number of opportunities that
the minimum travel cost refers to.</p></dd>


<dt id="arg-group-by">group_by<a class="anchor" aria-label="anchor" href="#arg-group-by"></a></dt>
<dd><p>A <code>character</code> vector. When not <code>character(0)</code> (the default),
indicates the <code>travel_matrix</code> columns that should be used to group the
accessibility estimates by. For example, if <code>travel_matrix</code> includes a
departure time column, that specifies the departure time of each entry in
the data frame, passing <code>"departure_time"</code> to this parameter results in
accessibility estimates grouped by origin and by departure time.</p></dd>


<dt id="arg-active">active<a class="anchor" aria-label="anchor" href="#arg-active"></a></dt>
<dd><p>A logical. Whether to calculate active accessibility (the
of opportunities that can be reached from a given origin, the default) or
passive accessibility (by how many people each destination can be reached).</p></dd>


<dt id="arg-fill-missing-ids">fill_missing_ids<a class="anchor" aria-label="anchor" href="#arg-fill-missing-ids"></a></dt>
<dd><p>A <code>logical</code>. Calculating minimum travel cost to
closest N number of opportunities may result in missing ids in the output
if they cannot reach the specified amount of opportunities across all
destinations they can reach. For example, estimating the minimum travel
time that an origin that can only reach 4 opportunities takes to reach 5
opportunities resulting in such origin not being included in the output.
When <code>TRUE</code> (the default), the function identifies which ids would be left
out from the output and fill their respective minimum travel costs with
<code>Inf</code>, which incurs in a performance penalty.</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    <p>A data frame containing the accessibility estimates for each
origin/destination (depending if <code>active</code> is <code>TRUE</code> or <code>FALSE</code>) in the
travel matrix.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="kw">if</span> <span class="op">(</span><span class="cn">FALSE</span><span class="op">)</span> <span class="op">{</span> <span class="co"># identical(tolower(Sys.getenv("NOT_CRAN")), "true")</span></span></span>
<span class="r-in"><span><span class="va">data_dir</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/system.file.html" class="external-link">system.file</a></span><span class="op">(</span><span class="st">"extdata"</span>, package <span class="op">=</span> <span class="st">"accessibility"</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">travel_matrix</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/readRDS.html" class="external-link">readRDS</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/file.path.html" class="external-link">file.path</a></span><span class="op">(</span><span class="va">data_dir</span>, <span class="st">"travel_matrix.rds"</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">land_use_data</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/readRDS.html" class="external-link">readRDS</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/file.path.html" class="external-link">file.path</a></span><span class="op">(</span><span class="va">data_dir</span>, <span class="st">"land_use_data.rds"</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="va">df</span> <span class="op">&lt;-</span> <span class="fu">cost_to_closest</span><span class="op">(</span></span></span>
<span class="r-in"><span>  <span class="va">travel_matrix</span>,</span></span>
<span class="r-in"><span>  <span class="va">land_use_data</span>,</span></span>
<span class="r-in"><span>  n <span class="op">=</span> <span class="fl">1</span>,</span></span>
<span class="r-in"><span>  opportunity <span class="op">=</span> <span class="st">"schools"</span>,</span></span>
<span class="r-in"><span>  travel_cost <span class="op">=</span> <span class="st">"travel_time"</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">df</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="va">df</span> <span class="op">&lt;-</span> <span class="fu">cost_to_closest</span><span class="op">(</span></span></span>
<span class="r-in"><span>  <span class="va">travel_matrix</span>,</span></span>
<span class="r-in"><span>  <span class="va">land_use_data</span>,</span></span>
<span class="r-in"><span>  n <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fl">2</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>  opportunity <span class="op">=</span> <span class="st">"schools"</span>,</span></span>
<span class="r-in"><span>  travel_cost <span class="op">=</span> <span class="st">"travel_time"</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">df</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">}</span></span></span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Rafael H. M. Pereira, Daniel Herszenhut, Ipea - Institute for Applied Economic Research.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.1.9000.</p>
</div>

    </footer></div>





  </body></html>

