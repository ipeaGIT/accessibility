<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Introduction to accessibility: calculating accessibility measures • accessibility</title>
<!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png">
<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png">
<link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png">
<link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png">
<link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png">
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><meta property="og:title" content="Introduction to accessibility: calculating accessibility measures">
<meta property="og:description" content="accessibility">
<meta property="og:image" content="/logo.png">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body data-spy="scroll" data-target="#toc">
    

    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">accessibility</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">1.3.0</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../articles/accessibility.html">Get started</a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/decay_functions.html">Decay functions</a>
    </li>
    <li>
      <a href="../articles/inequality_and_poverty.html">Calculating accessibility inequality and poverty</a>
    </li>
  </ul>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/ipeaGIT/accessibility/" class="external-link">
    <span class="fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1 data-toc-skip>Introduction to accessibility: calculating
accessibility measures</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/ipeaGIT/accessibility/blob/HEAD/vignettes/accessibility.Rmd" class="external-link"><code>vignettes/accessibility.Rmd</code></a></small>
      <div class="hidden name"><code>accessibility.Rmd</code></div>

    </div>

    
    
<p><strong>accessibility</strong> is an R package that offers a set of
fast and convenient functions to calculate multiple transport
accessibility measures. Given a pre-computed travel cost matrix and a
land use dataset, the package allows one to calculate active and passive
accessibility levels using multiple accessibility metrics, such as
cumulative opportunities (using either a travel cost cutoff or a travel
cost interval), minimum travel cost to closest N number of activities,
gravitational measures and different floating catchment area methods.
This vignette briefly overviews the package with a few reproducible
examples.</p>
<div class="section level2">
<h2 id="installation">Installation<a class="anchor" aria-label="anchor" href="#installation"></a>
</h2>
<p>Before using <strong>accessibility</strong> please make sure that you
have it installed in your computer. You can download either the most
stable version from CRAN…</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/utils/install.packages.html" class="external-link">install.packages</a></span><span class="op">(</span><span class="st">"accessibility"</span><span class="op">)</span></span></code></pre></div>
<p>…or the development version from GitHub.</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># install.packages("remotes")</span></span>
<span><span class="fu">remotes</span><span class="fu">::</span><span class="fu">install_github</span><span class="op">(</span><span class="st">"ipeaGIT/accessibility"</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="overview-of-the-package">Overview of the package<a class="anchor" aria-label="anchor" href="#overview-of-the-package"></a>
</h2>
<p>As of the time of writing this vignette, the
<strong>accessibility</strong> package includes five different functions
to calculate accessibility:</p>
<ol style="list-style-type: decimal">
<li>
<code><a href="../reference/cost_to_closest.html">cost_to_closest()</a></code> - calculates the minimum travel cost
to the closest <em>n</em> number of opportunities.</li>
<li>
<code><a href="../reference/cumulative_cutoff.html">cumulative_cutoff()</a></code> - calculates the frequently used
threshold-based cumulative opportunities measure.</li>
<li>
<code><a href="../reference/cumulative_interval.html">cumulative_interval()</a></code> - calculates accessibility as the
median/mean (or any other summary measure, really) number of
opportunities that can be reached within a cost interval.</li>
<li>
<code><a href="../reference/gravity.html">gravity()</a></code> - calculates gravity-based accessibility,
taking a decay function specified by the user (more on that in a few
paragraphs).</li>
<li>
<code><a href="../reference/floating_catchment_area.html">floating_catchment_area()</a></code> - calculates accessibility
taking into account the effects of competition for opportunities with
different floating catchment area measures.</li>
</ol>
<p>You may have noticed that we’ve mentioned a few times that the
functions calculate accessibility using travel <em>cost</em>, and not
travel <em>time</em>. That’s because we’re treating <em>costs</em> here
in its generic sense: anything that increases the impedance from an
origin to a destination, such as travel time, monetary costs, distances,
risk perception, etc., can be considered a generic <em>cost</em>.</p>
<p>The <code><a href="../reference/gravity.html">gravity()</a></code> and <code><a href="../reference/floating_catchment_area.html">floating_catchment_area()</a></code>
functions can use different decay functions when estimating
accessibility levels. These decay functions effectively weigh the number
of opportunities in a destination by a factor that depends on the travel
cost between the origin and the destination. For convenience, the
package currently includes the following decay functions:</p>
<ol style="list-style-type: decimal">
<li>
<code><a href="../reference/decay_binary.html">decay_binary()</a></code> - binary decay function (the one used in
cumulative opportunities measures).</li>
<li>
<code><a href="../reference/decay_exponential.html">decay_exponential()</a></code> - negative exponential decay
function.</li>
<li>
<code><a href="../reference/decay_linear.html">decay_linear()</a></code> - linear decay function (weights decay
linearly from 1 to 0 until a specific travel cost cutoff is
reached).</li>
<li>
<code><a href="../reference/decay_power.html">decay_power()</a></code> - inverse power decay function.</li>
<li>
<code><a href="../reference/decay_stepped.html">decay_stepped()</a></code> - stepped decay function (similar to
<code><a href="../reference/decay_binary.html">decay_binary()</a></code>, but can take an arbitrary number of steps,
instead of a single one).</li>
</ol>
<p>The users can also specify their own custom decay functions, if they
need to use functions currently not included in the package. For more
details on this, please read the <a href="decay_functions.html">decay
functions vignette</a>.</p>
</div>
<div class="section level2">
<h2 id="demonstration-on-sample-data">Demonstration on sample data<a class="anchor" aria-label="anchor" href="#demonstration-on-sample-data"></a>
</h2>
<p>Enough talking. Let’s demonstrate some of the key features of the
package. First we’ll need to load the libraries we’ll be using:</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/ipeaGIT/accessibility" class="external-link">accessibility</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://r-datatable.com" class="external-link">data.table</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://ggplot2.tidyverse.org" class="external-link">ggplot2</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://r-spatial.github.io/sf/" class="external-link">sf</a></span><span class="op">)</span></span></code></pre></div>
<div class="section level3">
<h3 id="data-requirements">Data requirements<a class="anchor" aria-label="anchor" href="#data-requirements"></a>
</h3>
<p>To use <strong>accessibility</strong>, you will need a pre-computed
travel cost matrix and some land use data (e.g. location of jobs,
healthcare, population, etc.). As mentioned before, travel costs can be
presented in terms of travel times, distances or monetary costs, for
example. This dataset must be structured in a <code>data.frame</code>
containing, at least, the columns <code>from_id</code>,
<code>to_id</code> and the travel cost between each origin-destination
pair.</p>
<p>Your data should look similar to this sample dataset with public
transport travel times for the city of Belo Horizonte, Brazil, included
in the package for demonstration purposes<a href="#fn1" class="footnote-ref" id="fnref1"><sup>1</sup></a>.</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">data_dir</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/system.file.html" class="external-link">system.file</a></span><span class="op">(</span><span class="st">"extdata"</span>, package <span class="op">=</span> <span class="st">"accessibility"</span><span class="op">)</span></span>
<span></span>
<span><span class="va">travel_matrix</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/readRDS.html" class="external-link">readRDS</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/file.path.html" class="external-link">file.path</a></span><span class="op">(</span><span class="va">data_dir</span>, <span class="st">"travel_matrix.rds"</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">travel_matrix</span><span class="op">)</span></span>
<span><span class="co">#&gt;            from_id           to_id travel_time</span></span>
<span><span class="co">#&gt; 1: 89a88cdb57bffff 89a88cdb57bffff         5.8</span></span>
<span><span class="co">#&gt; 2: 89a88cdb57bffff 89a88cdb597ffff        47.0</span></span>
<span><span class="co">#&gt; 3: 89a88cdb57bffff 89a88cdb5b3ffff        48.0</span></span>
<span><span class="co">#&gt; 4: 89a88cdb57bffff 89a88cdb5cfffff        47.0</span></span>
<span><span class="co">#&gt; 5: 89a88cdb57bffff 89a88cd909bffff        64.0</span></span>
<span><span class="co">#&gt; 6: 89a88cdb57bffff 89a88cd90b7ffff        59.0</span></span></code></pre></div>
<p>The land use data must also be structured in a
<code>data.frame</code> and must contain an <code>id</code> column,
referring to the ids listed in the travel matrix, and the number of
opportunities/facilities/services in each spatial unit. The sample
dataset we’ll be using looks like this:</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">land_use_data</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/readRDS.html" class="external-link">readRDS</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/file.path.html" class="external-link">file.path</a></span><span class="op">(</span><span class="va">data_dir</span>, <span class="st">"land_use_data.rds"</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">land_use_data</span><span class="op">)</span></span>
<span><span class="co">#&gt;                 id population jobs schools income_per_capita income_decile</span></span>
<span><span class="co">#&gt; 1: 89a881a5a2bffff        381  180       0           22369.1            10</span></span>
<span><span class="co">#&gt; 2: 89a881a5a2fffff        269  134       0            3205.1             9</span></span>
<span><span class="co">#&gt; 3: 89a881a5a67ffff        929  143       0           11394.0            10</span></span>
<span><span class="co">#&gt; 4: 89a881a5a6bffff        249   61       0            3659.8             9</span></span>
<span><span class="co">#&gt; 5: 89a881a5a6fffff        176   11       0            4905.1            10</span></span>
<span><span class="co">#&gt; 6: 89a881a5b03ffff        681 1071       0            2200.2             8</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="minimum-travel-cost">Minimum travel cost<a class="anchor" aria-label="anchor" href="#minimum-travel-cost"></a>
</h3>
<p><code><a href="../reference/cost_to_closest.html">cost_to_closest()</a></code> calculates the minimum travel cost to
a given number of opportunities. Much like the other functions we’ll be
demonstrating in this section, it takes as inputs the travel matrix and
land use datasets, the name of the column in the latter with the
opportunities to be considered and the name of the column in the former
with the travel cost to be considered. Additionally, it takes the
minimum number of opportunities to be considered. Here’s how calculating
the time from each origin in Belo Horizonte to the closest school looks
like:</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">mtc</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/cost_to_closest.html">cost_to_closest</a></span><span class="op">(</span></span>
<span>  <span class="va">travel_matrix</span>,</span>
<span>  <span class="va">land_use_data</span>,</span>
<span>  opportunity <span class="op">=</span> <span class="st">"schools"</span>,</span>
<span>  travel_cost <span class="op">=</span> <span class="st">"travel_time"</span>,</span>
<span>  n <span class="op">=</span> <span class="fl">1</span></span>
<span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">mtc</span><span class="op">)</span></span>
<span><span class="co">#&gt;                 id travel_time</span></span>
<span><span class="co">#&gt; 1: 89a881a5a2bffff          29</span></span>
<span><span class="co">#&gt; 2: 89a881a5a2fffff          24</span></span>
<span><span class="co">#&gt; 3: 89a881a5a67ffff          28</span></span>
<span><span class="co">#&gt; 4: 89a881a5a6bffff          33</span></span>
<span><span class="co">#&gt; 5: 89a881a5a6fffff          32</span></span>
<span><span class="co">#&gt; 6: 89a881a5b03ffff          17</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="cutoff-based-cumulative-opportunities">Cutoff-based cumulative opportunities<a class="anchor" aria-label="anchor" href="#cutoff-based-cumulative-opportunities"></a>
</h3>
<p><code><a href="../reference/cumulative_cutoff.html">cumulative_cutoff()</a></code> calculates the traditional
cumulative opportunities measure, indicating the number of opportunities
that are accessible within a given travel cost threshold. In this
example, we estimate how many jobs can be reached from each origin with
trips taking up to 30 minutes of travel time.</p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">cum_cutoff</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/cumulative_cutoff.html">cumulative_cutoff</a></span><span class="op">(</span></span>
<span>  <span class="va">travel_matrix</span>,</span>
<span>  <span class="va">land_use_data</span>,</span>
<span>  opportunity <span class="op">=</span> <span class="st">"jobs"</span>,</span>
<span>  travel_cost <span class="op">=</span> <span class="st">"travel_time"</span>,</span>
<span>  cutoff <span class="op">=</span> <span class="fl">30</span></span>
<span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">cum_cutoff</span><span class="op">)</span></span>
<span><span class="co">#&gt;                 id  jobs</span></span>
<span><span class="co">#&gt; 1: 89a881a5a2bffff 14561</span></span>
<span><span class="co">#&gt; 2: 89a881a5a2fffff 29452</span></span>
<span><span class="co">#&gt; 3: 89a881a5a67ffff 16647</span></span>
<span><span class="co">#&gt; 4: 89a881a5a6bffff 10700</span></span>
<span><span class="co">#&gt; 5: 89a881a5a6fffff  6669</span></span>
<span><span class="co">#&gt; 6: 89a881a5b03ffff 37029</span></span></code></pre></div>
<p>Let’s say that we wanted to, instead, calculate <em>passive</em>
accessibility - i.e. by how many people each destination can be reached
within a given travel cost. Doing so requires very few changes to the
call: just change the “opportunity” column to <code>"population"</code>
and set <code>active</code> (<code>TRUE</code> by default) to
<code>FALSE</code>.</p>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">passive_cum_cutoff</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/cumulative_cutoff.html">cumulative_cutoff</a></span><span class="op">(</span></span>
<span>  <span class="va">travel_matrix</span>,</span>
<span>  <span class="va">land_use_data</span>,</span>
<span>  opportunity <span class="op">=</span> <span class="st">"population"</span>,</span>
<span>  travel_cost <span class="op">=</span> <span class="st">"travel_time"</span>,</span>
<span>  cutoff <span class="op">=</span> <span class="fl">30</span>,</span>
<span>  active <span class="op">=</span> <span class="cn">FALSE</span></span>
<span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">passive_cum_cutoff</span><span class="op">)</span></span>
<span><span class="co">#&gt;                 id population</span></span>
<span><span class="co">#&gt; 1: 89a881a5a2bffff      11053</span></span>
<span><span class="co">#&gt; 2: 89a881a5a2fffff      31903</span></span>
<span><span class="co">#&gt; 3: 89a881a5a67ffff      12488</span></span>
<span><span class="co">#&gt; 4: 89a881a5a6bffff      14474</span></span>
<span><span class="co">#&gt; 5: 89a881a5a6fffff      15053</span></span>
<span><span class="co">#&gt; 6: 89a881a5b03ffff      69582</span></span></code></pre></div>
<p>The <code>active</code> parameter is available in most other
accessibility functions as well (with the exception of
<code><a href="../reference/floating_catchment_area.html">floating_catchment_area()</a></code>), making it very easy to
calculate both active and passive accessibility.</p>
</div>
<div class="section level3">
<h3 id="interval-based-cumulative-opportunities">Interval-based cumulative opportunities<a class="anchor" aria-label="anchor" href="#interval-based-cumulative-opportunities"></a>
</h3>
<p><code>cumulative_time_interval()</code> calculates the interval-based
cumulative opportunities measure. This measure, developed by <span class="citation">(<strong>tomasiello2022time?</strong>)</span>,
mitigates the impacts of arbitrary choices of cost cutoffs, one of the
main disadvantages of the traditional threshold-based cumulative
opportunities measure. Given a cost interval, it calculates several
accessibility estimates within the interval and summarizes it using a
user-specified function. In the example below, we calculate the average
number of accessible jobs considering multiple minute-by-minute time
thresholds between 40 and 60 minutes.</p>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">cum_interval</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/cumulative_interval.html">cumulative_interval</a></span><span class="op">(</span></span>
<span>  travel_matrix <span class="op">=</span> <span class="va">travel_matrix</span>,</span>
<span>  land_use_data <span class="op">=</span> <span class="va">land_use_data</span>,</span>
<span>  opportunity <span class="op">=</span> <span class="st">"jobs"</span>,</span>
<span>  travel_cost <span class="op">=</span> <span class="st">"travel_time"</span>,</span>
<span>  interval <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">40</span>, <span class="fl">60</span><span class="op">)</span>,</span>
<span>  summary_function <span class="op">=</span> <span class="fu">base</span><span class="fu">::</span><span class="va"><a href="https://rdrr.io/r/base/mean.html" class="external-link">mean</a></span></span>
<span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">cum_interval</span><span class="op">)</span></span>
<span><span class="co">#&gt;                 id   jobs</span></span>
<span><span class="co">#&gt; 1: 89a88cdb57bffff 311965</span></span>
<span><span class="co">#&gt; 2: 89a88cdb597ffff 249416</span></span>
<span><span class="co">#&gt; 3: 89a88cdb5b3ffff 302515</span></span>
<span><span class="co">#&gt; 4: 89a88cdb5cfffff 373386</span></span>
<span><span class="co">#&gt; 5: 89a88cd909bffff 308429</span></span>
<span><span class="co">#&gt; 6: 89a88cd90b7ffff 344118</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="gravity-measures">Gravity measures<a class="anchor" aria-label="anchor" href="#gravity-measures"></a>
</h3>
<p><code><a href="../reference/gravity.html">gravity()</a></code> calculates gravity-based measures -
i.e. measures in which the weight of opportunities is gradually
discounted as the travel cost increases. Of course, several different
decay functions can be used to so, each one of them with a range of
possible different parameters. In order to accommodate such
generalization, the function takes the decay function to be used as a
parameter.</p>
<p>In the example below, we calculate accessibility using a negative
exponential function with a <code>decay_value</code> (usually referred
as the in its formulation) of 0.2. Please see <a href="decay_functions.html">the vignette on decay functions</a> for more
information on the decay functions shipped with the package and how to
use custom functions.</p>
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">negative_exp</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/gravity.html">gravity</a></span><span class="op">(</span></span>
<span>  <span class="va">travel_matrix</span>,</span>
<span>  <span class="va">land_use_data</span>,</span>
<span>  opportunity <span class="op">=</span> <span class="st">"schools"</span>,</span>
<span>  travel_cost <span class="op">=</span> <span class="st">"travel_time"</span>,</span>
<span>  decay_function <span class="op">=</span> <span class="fu"><a href="../reference/decay_exponential.html">decay_exponential</a></span><span class="op">(</span>decay_value <span class="op">=</span> <span class="fl">0.2</span><span class="op">)</span></span>
<span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">negative_exp</span><span class="op">)</span></span>
<span><span class="co">#&gt;                 id    schools</span></span>
<span><span class="co">#&gt; 1: 89a88cdb57bffff 0.03041853</span></span>
<span><span class="co">#&gt; 2: 89a88cdb597ffff 1.15549493</span></span>
<span><span class="co">#&gt; 3: 89a88cdb5b3ffff 0.56519126</span></span>
<span><span class="co">#&gt; 4: 89a88cdb5cfffff 0.19852152</span></span>
<span><span class="co">#&gt; 5: 89a88cd909bffff 0.41378042</span></span>
<span><span class="co">#&gt; 6: 89a88cd90b7ffff 0.95737555</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="floating-catchment-area">Floating catchment area<a class="anchor" aria-label="anchor" href="#floating-catchment-area"></a>
</h3>
<p><code><a href="../reference/floating_catchment_area.html">floating_catchment_area()</a></code> calculates accessibility
accounting for competition of resources using different floating
catchment area (FCA) methods. The FCA family includes several different
methods, which can be specified using the <code>method</code> parameter.
As of the time of writing this vignette, the package supports two
different methods:</p>
<ul>
<li>2-Step Floating Catchment Area (<code>"2sfca"</code>) - the first
metric in the FCA family, originally proposed by <span class="citation">Luo and Wang (2003)</span>.</li>
<li>Balanced Floating Catchment Area (<code>"bfca"</code>) - takes
competition affects into account while correcting for issues of
inflation of demand and service levels. Originally proposed by <span class="citation">Paez, Higgins, and Vivona (2019)</span> and named in
<span class="citation">Pereira et al. (2021)</span>.</li>
</ul>
<p>Please note that, since FCA measures consider competition effects, we
have to specify which column in the land use dataset represents the
population competing for opportunities with the <code>demand</code>
parameter. The function also supports different decay functions. In the
example below, we calculate accessibility to jobs using the BFCA method,
considering that the entire population of the city compete for these
jobs and using a negative exponential decay function.</p>
<div class="sourceCode" id="cb11"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">bfca</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/floating_catchment_area.html">floating_catchment_area</a></span><span class="op">(</span></span>
<span>  <span class="va">travel_matrix</span>,</span>
<span>  <span class="va">land_use_data</span>,</span>
<span>  opportunity <span class="op">=</span> <span class="st">"jobs"</span>,</span>
<span>  travel_cost <span class="op">=</span> <span class="st">"travel_time"</span>,</span>
<span>  demand <span class="op">=</span> <span class="st">"population"</span>,</span>
<span>  method <span class="op">=</span> <span class="st">"bfca"</span>,</span>
<span>  decay_function <span class="op">=</span> <span class="fu"><a href="../reference/decay_exponential.html">decay_exponential</a></span><span class="op">(</span>decay_value <span class="op">=</span> <span class="fl">0.5</span><span class="op">)</span></span>
<span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">bfca</span><span class="op">)</span></span>
<span><span class="co">#&gt;                 id       jobs</span></span>
<span><span class="co">#&gt; 1: 89a88cdb57bffff 0.10280082</span></span>
<span><span class="co">#&gt; 2: 89a88cdb597ffff 0.30930287</span></span>
<span><span class="co">#&gt; 3: 89a88cdb5b3ffff 0.07288551</span></span>
<span><span class="co">#&gt; 4: 89a88cdb5cfffff 0.09759117</span></span>
<span><span class="co">#&gt; 5: 89a88cd909bffff 0.07390234</span></span>
<span><span class="co">#&gt; 6: 89a88cd90b7ffff 1.22525579</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="spatial-availability">Spatial availability<a class="anchor" aria-label="anchor" href="#spatial-availability"></a>
</h3>
<p><code><a href="../reference/spatial_availability.html">spatial_availability()</a></code> also calculates accessibility
considering competition effects, though using the spatial availability
measure proposed by <span class="citation">Soukhov et al. (2023)</span>.
The results from this metric are proportional both to the demand in each
origin and the travel cost it takes to reach the destinations. As with
the FCA function, we have to specify the column in the land use dataset
that contains the population competing for opportunities and we can use
different decay functions to calculate the impedance between
origin-destination pairs.</p>
<div class="sourceCode" id="cb12"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">spatial_avlblt</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/spatial_availability.html">spatial_availability</a></span><span class="op">(</span></span>
<span>  <span class="va">travel_matrix</span>,</span>
<span>  <span class="va">land_use_data</span>,</span>
<span>  opportunity <span class="op">=</span> <span class="st">"jobs"</span>,</span>
<span>  travel_cost <span class="op">=</span> <span class="st">"travel_time"</span>,</span>
<span>  demand <span class="op">=</span> <span class="st">"population"</span>,</span>
<span>  decay_function <span class="op">=</span> <span class="fu"><a href="../reference/decay_exponential.html">decay_exponential</a></span><span class="op">(</span>decay_value <span class="op">=</span> <span class="fl">0.1</span><span class="op">)</span></span>
<span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">spatial_avlblt</span><span class="op">)</span></span>
<span><span class="co">#&gt;                 id     jobs</span></span>
<span><span class="co">#&gt; 1: 89a88cdb57bffff 186.0876</span></span>
<span><span class="co">#&gt; 2: 89a88cdb597ffff 140.0738</span></span>
<span><span class="co">#&gt; 3: 89a88cdb5b3ffff 736.5830</span></span>
<span><span class="co">#&gt; 4: 89a88cdb5cfffff 900.9284</span></span>
<span><span class="co">#&gt; 5: 89a88cd909bffff   0.0000</span></span>
<span><span class="co">#&gt; 6: 89a88cd90b7ffff 204.7962</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="balancing-cost">Balancing cost<a class="anchor" aria-label="anchor" href="#balancing-cost"></a>
</h3>
<p><code><a href="../reference/balancing_cost.html">balancing_cost()</a></code> calculates the balancing cost
accessibility measure. Originally proposed by <span class="citation">Barboza et al. (2021)</span> under the name “balancing
time”, this metric is defined as the travel cost required to reach as
many opportunities as the number of people in a given origin. Just like
the previous two functions, <code><a href="../reference/balancing_cost.html">balancing_cost()</a></code> also includes
a parameter to specify the population competing for opportunities.</p>
<p>The function also includes a <code>cost_increment</code> parameter,
that should be used to specify the increment that defines the travel
cost distribution from which the potential balancing costs will be
picked. For example, an increment of 1 (the default) tends to suit
travel time distributions, meaning that the function will first check if
any origins reach their balancing cost with a travel time of 0 minutes,
then 1 minute, 2 minutes, 3, 4, …, etc. On the other hand, an increment
of 1 might be too big for a distribution of monetary costs, which could
possibly benefit from a smaller increment of 0.05 (5 cents), for
example. Such increment results in the function looking for balancing
costs first at a monetary cost of 0, then 0.05, 0.10, …, etc. In the
example below, we use the default cost increment of 1.</p>
<div class="sourceCode" id="cb13"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">bal_cost</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/balancing_cost.html">balancing_cost</a></span><span class="op">(</span></span>
<span>  <span class="va">travel_matrix</span>,</span>
<span>  <span class="va">land_use_data</span>,</span>
<span>  opportunity <span class="op">=</span> <span class="st">"jobs"</span>,</span>
<span>  travel_cost <span class="op">=</span> <span class="st">"travel_time"</span>,</span>
<span>  demand <span class="op">=</span> <span class="st">"population"</span></span>
<span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">bal_cost</span><span class="op">)</span></span>
<span><span class="co">#&gt;                 id travel_time</span></span>
<span><span class="co">#&gt; 1: 89a881a5a2bffff          15</span></span>
<span><span class="co">#&gt; 2: 89a881a5a2fffff          13</span></span>
<span><span class="co">#&gt; 3: 89a881a5a67ffff          23</span></span>
<span><span class="co">#&gt; 4: 89a881a5a6bffff           7</span></span>
<span><span class="co">#&gt; 5: 89a881a5a6fffff          10</span></span>
<span><span class="co">#&gt; 6: 89a881a5b03ffff           6</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="visualize-results">Visualize results<a class="anchor" aria-label="anchor" href="#visualize-results"></a>
</h3>
<p>If you have the spatial data of your origins/destinations, you can
easily merge it with the accessibility to create spatial visualizations
of the results. The example below quickly shows how to create a simple
map using <a href="https://ggplot2.tidyverse.org" class="external-link">ggplot2</a>.</p>
<div class="sourceCode" id="cb14"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">grid</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/system.file.html" class="external-link">system.file</a></span><span class="op">(</span><span class="st">"extdata/grid_bho.rds"</span>, package <span class="op">=</span> <span class="st">"accessibility"</span><span class="op">)</span></span>
<span><span class="va">grid</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/readRDS.html" class="external-link">readRDS</a></span><span class="op">(</span><span class="va">grid</span><span class="op">)</span></span>
<span></span>
<span><span class="va">spatial_data</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/merge.html" class="external-link">merge</a></span><span class="op">(</span><span class="va">grid</span>, <span class="va">cum_cutoff</span>, by <span class="op">=</span> <span class="st">"id"</span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html" class="external-link">ggplot</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggsf.html" class="external-link">geom_sf</a></span><span class="op">(</span>data <span class="op">=</span> <span class="va">spatial_data</span>, <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html" class="external-link">aes</a></span><span class="op">(</span>fill <span class="op">=</span> <span class="va">jobs</span><span class="op">)</span>, color <span class="op">=</span> <span class="cn">NA</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html" class="external-link">labs</a></span><span class="op">(</span></span>
<span>    title <span class="op">=</span> <span class="st">"Job accessibility by transit in under 30 min."</span>,</span>
<span>    fill <span class="op">=</span> <span class="st">"Accessible jobs"</span></span>
<span>  <span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/scale_viridis.html" class="external-link">scale_fill_viridis_c</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggtheme.html" class="external-link">theme_void</a></span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<p><img src="accessibility_files/figure-html/unnamed-chunk-15-1.png" width="80%"></p>
</div>
</div>
<div class="section level2">
<h2 class="unnumbered" id="references">References<a class="anchor" aria-label="anchor" href="#references"></a>
</h2>
<div id="refs" class="references csl-bib-body hanging-indent">
<div id="ref-barboza2021balancing" class="csl-entry">
Barboza, Matheus H. C., Mariana S. Carneiro, Claudio Falavigna, Gregório
Luz, and Romulo Orrico. 2021. <span>“Balancing Time: <span>Using</span>
a New Accessibility Measure in <span>Rio</span> de
<span>Janeiro</span>.”</span> <em>Journal of Transport Geography</em> 90
(January): 102924. <a href="https://doi.org/10.1016/j.jtrangeo.2020.102924" class="external-link">https://doi.org/10.1016/j.jtrangeo.2020.102924</a>.
</div>
<div id="ref-luo2003measures" class="csl-entry">
Luo, Wei, and Fahui Wang. 2003. <span>“Measures of <span>Spatial
Accessibility</span> to <span>Health Care</span> in a <span>GIS
Environment</span>: <span>Synthesis</span> and a <span>Case Study</span>
in the <span>Chicago Region</span>.”</span> <em>Environment and Planning
B: Planning and Design</em> 30 (6): 865–84. <a href="https://doi.org/10.1068/b29120" class="external-link">https://doi.org/10.1068/b29120</a>.
</div>
<div id="ref-paez2019demand" class="csl-entry">
Paez, Antonio, Christopher D. Higgins, and Salvatore F. Vivona. 2019.
<span>“Demand and Level of Service Inflation in <span>Floating Catchment
Area</span> (<span>FCA</span>) Methods.”</span> Edited by Tayyab Ikram
Shah. <em>PLOS ONE</em> 14 (6): e0218773. <a href="https://doi.org/10.1371/journal.pone.0218773" class="external-link">https://doi.org/10.1371/journal.pone.0218773</a>.
</div>
<div id="ref-pereira2021geographic" class="csl-entry">
Pereira, Rafael H. M., Carlos Kauê Vieira Braga, Luciana Mendes Servo,
Bernardo Serra, Pedro Amaral, Nelson Gouveia, and Antonio Paez. 2021.
<span>“Geographic Access to <span>COVID-19</span> Healthcare in
<span>Brazil</span> Using a Balanced Float Catchment Area
Approach.”</span> <em>Social Science &amp; Medicine</em> 273 (March):
113773. <a href="https://doi.org/10.1016/j.socscimed.2021.113773" class="external-link">https://doi.org/10.1016/j.socscimed.2021.113773</a>.
</div>
<div id="ref-soukhov2023introducing" class="csl-entry">
Soukhov, Anastasia, Antonio Páez, Christopher D. Higgins, and Moataz
Mohamed. 2023. <span>“Introducing Spatial Availability, a
Singly-Constrained Measure of Competitive Accessibility.”</span> Edited
by Jun Yang. <em>PLOS ONE</em> 18 (1): e0278468. <a href="https://doi.org/10.1371/journal.pone.0278468" class="external-link">https://doi.org/10.1371/journal.pone.0278468</a>.
</div>
</div>
</div>
<div class="footnotes footnotes-end-of-document">
<hr>
<ol>
<li id="fn1"><p>If you would like to calculate such travel cost matrices
yourself, there are several computational packages to do that in R, such
as <a href="https://github.com/ipeaGIT/r5r" class="external-link">r5r</a>, <a href="https://github.com/UrbanAnalyst/dodgr" class="external-link">dodgr</a>, <a href="https://github.com/UrbanAnalyst/gtfsrouter" class="external-link">gtfsrouter</a>, <a href="https://github.com/munterfi/hereR" class="external-link">hereR</a> and <a href="https://github.com/ropensci/opentripplanner" class="external-link">opentripplanner</a>.<a href="#fnref1" class="footnote-back">↩︎</a></p></li>
</ol>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">

        <nav id="toc" data-toggle="toc"><h2 data-toc-skip>Contents</h2>
    </nav>
</div>

</div>



      <footer><div class="copyright">
  <p></p>
<p>Developed by Rafael H. M. Pereira, Daniel Herszenhut, Ipea - Institute for Applied Economic Research.</p>
</div>

<div class="pkgdown">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.7.</p>
</div>

      </footer>
</div>

  


  

  </body>
</html>
