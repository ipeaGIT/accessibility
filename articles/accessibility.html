<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Introduction to accessibility: calculating accessibility metrics • accessibility</title>
<!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png">
<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png">
<link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png">
<link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png">
<link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png">
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><meta property="og:title" content="Introduction to accessibility: calculating accessibility metrics">
<meta property="og:description" content="accessibility">
<meta property="og:image" content="/logo.png">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body data-spy="scroll" data-target="#toc">
    

    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">accessibility</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="">0.1.0.9000</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../articles/accessibility.html">Get started</a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/decay_functions.html">Decay functions</a>
    </li>
  </ul>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/ipeaGIT/accessibility/" class="external-link">
    <span class="fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><script src="accessibility_files/accessible-code-block-0.0.1/empty-anchor.js"></script><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1 data-toc-skip>Introduction to accessibility: calculating accessibility metrics</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/ipeaGIT/accessibility/blob/HEAD/vignettes/accessibility.Rmd" class="external-link"><code>vignettes/accessibility.Rmd</code></a></small>
      <div class="hidden name"><code>accessibility.Rmd</code></div>

    </div>

    
    
<p><strong>accessibility</strong> is an R package that offers a set of fast and convenient functions to calculate multiple transport accessibility measures. Given a pre-computed travel cost matrix and a land use dataset, the package allows one to calculate active and passive accessibility levels using multiple accessibility metrics, such as cumulative opportunities (using either a travel cost cutoff or an travel cost interval), minimum travel cost to closest N number of activities, gravitational measures and different floating catchment area methods. This vignette briefly overviews the package with a few reproducible example.</p>
<div class="section level2">
<h2 id="installation">Installation<a class="anchor" aria-label="anchor" href="#installation"></a>
</h2>
<p>Before using <strong>accessibility</strong> please make sure that you have it installed in your computer. You can download either the most stable version from CRAN…</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/utils/install.packages.html" class="external-link">install.packages</a></span><span class="op">(</span><span class="st">"accessibility"</span><span class="op">)</span></span></code></pre></div>
<p>…or the development version from GitHub.</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># install.packages("remotes")</span></span>
<span><span class="fu">remotes</span><span class="fu">::</span><span class="fu">install_github</span><span class="op">(</span><span class="st">"ipeaGIT/accessibility"</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="overview-of-the-package">Overview of the package<a class="anchor" aria-label="anchor" href="#overview-of-the-package"></a>
</h2>
<p>As of the time of writing this vignette, the <strong>accessibility</strong> package includes five different functions to calculate accessibility:</p>
<ol style="list-style-type: decimal">
<li>
<code><a href="../reference/cost_to_closest.html">cost_to_closest()</a></code> - calculates the mininimum travel cost to the closest <em>n</em> number of opportunities.</li>
<li>
<code><a href="../reference/cumulative_cutoff.html">cumulative_cutoff()</a></code> - calculates the frenquently used threshold-based cumulative opportunities measure.</li>
<li>
<code><a href="../reference/cumulative_interval.html">cumulative_interval()</a></code> - calculates accessibility as the median/mean (or any other summary measure, really) number of opportunities that can be reached within a cost interval.</li>
<li>
<code><a href="../reference/gravity.html">gravity()</a></code> - calculates gravity-based accessibility, taking a decay function specified by the user (more on that in a few paragraphs).</li>
<li>
<code><a href="../reference/floating_catchment_area.html">floating_catchment_area()</a></code> - calculates accessibility taking into account the effects of competition for opportunities with different floating catchment area measures.</li>
</ol>
<p>You may have noticed that we’ve mentioned a few times that the functions calculate accessibility using travel <em>cost</em>, and not travel <em>time</em>. That’s because we’re treating <em>costs</em> here in its generic sense: anything that increases the impedance from an origin to a destination, such as travel time, monetary costs, risk perception, etc., can be considered a generic <em>cost</em>.</p>
<p>The <code>gravity_access()</code> and <code><a href="../reference/floating_catchment_area.html">floating_catchment_area()</a></code> functions can use different decay functions when estimating accessibility levels. This decay functions effectively weigh the number of opportunities in a destination by a factor that depends on the travel cost between the origin and the destination. For convenience, the package currently includes the following decay functions:</p>
<ol style="list-style-type: decimal">
<li>
<code><a href="../reference/decay_binary.html">decay_binary()</a></code> - binary decay function (the one used in cumulative opportunities measures).</li>
<li>
<code><a href="../reference/decay_exponential.html">decay_exponential()</a></code> - negative exponential decay function.</li>
<li>
<code><a href="../reference/decay_linear.html">decay_linear()</a></code> - linear decay function (weights decay linearly from 1 to 0 until a specific travel cost cutoff is reached).</li>
<li>
<code><a href="../reference/decay_power.html">decay_power()</a></code> - inverse power decay function.</li>
<li>
<code><a href="../reference/decay_stepped.html">decay_stepped()</a></code> - stepped decay function (similar to <code><a href="../reference/decay_binary.html">decay_binary()</a></code>, but can take an arbitrary number of steps, instead of a single one).</li>
</ol>
<p>The users can also specify their own custom decay functions, if they need to use functions currently not included in the package. For more details on this, please read the <a href="decay_functions.html">decay functions vignette</a>.</p>
</div>
<div class="section level2">
<h2 id="demonstration-on-sample-data">Demonstration on sample data<a class="anchor" aria-label="anchor" href="#demonstration-on-sample-data"></a>
</h2>
<p>Enough talking. Let’s demonstrate some of the key features of the package. First we’ll need to load the libraries we’ll be using:</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/ipeaGIT/accessibility" class="external-link">accessibility</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://r-datatable.com" class="external-link">data.table</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://ggplot2.tidyverse.org" class="external-link">ggplot2</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://r-spatial.github.io/sf/" class="external-link">sf</a></span><span class="op">)</span></span></code></pre></div>
<div class="section level3">
<h3 id="data-requirements">Data requirements<a class="anchor" aria-label="anchor" href="#data-requirements"></a>
</h3>
<p>To use <strong>accessibility</strong>, you will need a pre-computed travel cost matrix and some land use data (e.g. location of jobs, healthcare, population, etc.). As mentioned before, travel costs can be presented in terms of travel times, distances or monetary costs, for example. This dataset must be structured in a <code>data.frame</code> containing, at least, the columns <code>from_id</code>, <code>to_id</code> and the travel cost between each origin-destination pair.</p>
<p>Your data should look similar to this:</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">data_dir</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/system.file.html" class="external-link">system.file</a></span><span class="op">(</span><span class="st">"extdata"</span>, package <span class="op">=</span> <span class="st">"accessibility"</span><span class="op">)</span></span>
<span></span>
<span><span class="va">travel_matrix</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/readRDS.html" class="external-link">readRDS</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/file.path.html" class="external-link">file.path</a></span><span class="op">(</span><span class="va">data_dir</span>, <span class="st">"travel_matrix.rds"</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">travel_matrix</span><span class="op">)</span></span>
<span><span class="co">#&gt;            from_id           to_id travel_time</span></span>
<span><span class="co">#&gt; 1: 89a88cdb57bffff 89a88cdb57bffff         5.8</span></span>
<span><span class="co">#&gt; 2: 89a88cdb57bffff 89a88cdb597ffff        47.0</span></span>
<span><span class="co">#&gt; 3: 89a88cdb57bffff 89a88cdb5b3ffff        48.0</span></span>
<span><span class="co">#&gt; 4: 89a88cdb57bffff 89a88cdb5cfffff        47.0</span></span>
<span><span class="co">#&gt; 5: 89a88cdb57bffff 89a88cd909bffff        64.0</span></span>
<span><span class="co">#&gt; 6: 89a88cdb57bffff 89a88cd90b7ffff        59.0</span></span></code></pre></div>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">land_use_data</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/readRDS.html" class="external-link">readRDS</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/file.path.html" class="external-link">file.path</a></span><span class="op">(</span><span class="va">data_dir</span>, <span class="st">"land_use_data.rds"</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">land_use_data</span><span class="op">)</span></span>
<span><span class="co">#&gt;                 id population jobs schools</span></span>
<span><span class="co">#&gt; 1: 89a88cdb57bffff        606   82       0</span></span>
<span><span class="co">#&gt; 2: 89a88cdb597ffff        734  308       2</span></span>
<span><span class="co">#&gt; 3: 89a88cdb5b3ffff       1670  100       0</span></span>
<span><span class="co">#&gt; 4: 89a88cdb5cfffff       1864  109       0</span></span>
<span><span class="co">#&gt; 5: 89a88cd909bffff         29    0       0</span></span>
<span><span class="co">#&gt; 6: 89a88cd90b7ffff       1117  480       0</span></span></code></pre></div>
<p>This is a small sample data with public transport travel times and land use data for the city of Belo Horizonte (Brazil) included in the package and that we will be using to illustrate its functionalities.</p>
<p>If you would like to estimate such travel cost matrices, there are several computational packages to do that in R, such as: - <a href="https://github.com/ipeaGIT/r5r" class="external-link">r5r</a> - <a href="https://github.com/ATFutures/dodgr" class="external-link">dodgr</a> - <a href="https://github.com/ATFutures/gtfs-router" class="external-link">gtfsrouter</a> - <a href="https://github.com/munterfi/hereR" class="external-link">hereR</a> - <a href="https://github.com/ropensci/opentripplanner" class="external-link">opentripplanner</a></p>
</div>
<div class="section level3">
<h3 id="minimum-travel-cost">5.1 Minimum travel cost:<a class="anchor" aria-label="anchor" href="#minimum-travel-cost"></a>
</h3>
<p><code>time_to_closest()</code> allows you to easily calculate the minimum travel cost accessibility. In the example below, the output shows the minimum travel cost from each origin to the closet school and the id of the destination where the school is located.</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">df</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/cost_to_closest.html">cost_to_closest</a></span><span class="op">(</span></span>
<span>  <span class="va">travel_matrix</span>,</span>
<span>  <span class="va">land_use_data</span>,</span>
<span>  n <span class="op">=</span> <span class="fl">1</span>,</span>
<span>  opportunity_col <span class="op">=</span> <span class="st">"schools"</span>,</span>
<span>  travel_cost_col <span class="op">=</span> <span class="st">"travel_time"</span></span>
<span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">df</span><span class="op">)</span></span>
<span><span class="co">#&gt;                 id travel_time</span></span>
<span><span class="co">#&gt; 1: 89a881a5a2bffff          29</span></span>
<span><span class="co">#&gt; 2: 89a881a5a2fffff          24</span></span>
<span><span class="co">#&gt; 3: 89a881a5a67ffff          28</span></span>
<span><span class="co">#&gt; 4: 89a881a5a6bffff          33</span></span>
<span><span class="co">#&gt; 5: 89a881a5a6fffff          32</span></span>
<span><span class="co">#&gt; 6: 89a881a5b03ffff          17</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="cumulative-opportunity-measures">5.2 Cumulative opportunity measures:<a class="anchor" aria-label="anchor" href="#cumulative-opportunity-measures"></a>
</h3>
<div class="section level5">
<h5 id="time-threshold">Time threshold<a class="anchor" aria-label="anchor" href="#time-threshold"></a>
</h5>
<p>The <code>cumulative_time_cutoff()</code> functions calculates traditional cumulative opportunity accessibility, indicating the number of opportunities that are accessible in under a given travel cost threshold. In this example, we estimate the number of jobs accessible in up to 30 minutes.</p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">cum_cutoff</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/cumulative_cutoff.html">cumulative_cutoff</a></span><span class="op">(</span></span>
<span>  travel_matrix <span class="op">=</span> <span class="va">travel_matrix</span>,</span>
<span>  land_use_data <span class="op">=</span> <span class="va">land_use_data</span>,</span>
<span>  cutoff <span class="op">=</span> <span class="fl">30</span>,</span>
<span>  opportunity_col <span class="op">=</span> <span class="st">"schools"</span>,</span>
<span>  travel_cost_col <span class="op">=</span> <span class="st">"travel_time"</span></span>
<span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">cum_cutoff</span><span class="op">)</span></span>
<span><span class="co">#&gt;                 id schools</span></span>
<span><span class="co">#&gt; 1: 89a88cdb57bffff       6</span></span>
<span><span class="co">#&gt; 2: 89a88cdb597ffff      22</span></span>
<span><span class="co">#&gt; 3: 89a88cdb5b3ffff      23</span></span>
<span><span class="co">#&gt; 4: 89a88cdb5cfffff       6</span></span>
<span><span class="co">#&gt; 5: 89a88cd909bffff      17</span></span>
<span><span class="co">#&gt; 6: 89a88cd90b7ffff      20</span></span></code></pre></div>
</div>
<div class="section level5">
<h5 id="time-interval">Time interval<a class="anchor" aria-label="anchor" href="#time-interval"></a>
</h5>
<p><code>cumulative_time_interval()</code> calculates the the time interval cumulative accessibility measure. This is a novel accessibility metric developed by Tomasiello et al. (<em>forthcoming paper</em>) to mitigate the impacts of arbitrary choices of trip duration in traditional threshold-based cumulative opportunity metrics. In the example below, we calculate the average number of jobs accessible considering multiple minute-by-minute time thresholds between 20 and 60 minutes.</p>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">df</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/cumulative_interval.html">cumulative_interval</a></span><span class="op">(</span></span>
<span>  travel_matrix <span class="op">=</span> <span class="va">travel_matrix</span>,</span>
<span>  land_use_data <span class="op">=</span> <span class="va">land_use_data</span>,</span>
<span>  interval <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">20</span>, <span class="fl">30</span><span class="op">)</span>,</span>
<span>  opportunity_col <span class="op">=</span> <span class="st">"schools"</span>,</span>
<span>  travel_cost_col <span class="op">=</span> <span class="st">"travel_time"</span></span>
<span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">df</span><span class="op">)</span></span>
<span><span class="co">#&gt;                 id schools</span></span>
<span><span class="co">#&gt; 1: 89a88cdb57bffff       0</span></span>
<span><span class="co">#&gt; 2: 89a88cdb597ffff      14</span></span>
<span><span class="co">#&gt; 3: 89a88cdb5b3ffff      17</span></span>
<span><span class="co">#&gt; 4: 89a88cdb5cfffff       4</span></span>
<span><span class="co">#&gt; 5: 89a88cd909bffff       6</span></span>
<span><span class="co">#&gt; 6: 89a88cd90b7ffff      12</span></span></code></pre></div>
</div>
</div>
<div class="section level3">
<h3 id="gravity-based-accessibility">5.3 Gravity-based accessibility:<a class="anchor" aria-label="anchor" href="#gravity-based-accessibility"></a>
</h3>
<p>The <code>gravity_access()</code> allows one to continuously discount the weight of opportunities as travel costs become larger. See the <a href="https://ipeagit.github.io/accessibility/articles/decay_functions.html" class="external-link">vignette on decay functions</a> for more information on the decay functions available in the package and how to use custom functions. In this case here, we use a negative exponential function with a <code>decay_value</code>  of 0.2</p>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">df_linear</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/gravity.html">gravity</a></span><span class="op">(</span></span>
<span>  <span class="va">travel_matrix</span>,</span>
<span>  <span class="va">land_use_data</span>,</span>
<span>  decay_function <span class="op">=</span> <span class="fu"><a href="../reference/decay_linear.html">decay_linear</a></span><span class="op">(</span>cutoff <span class="op">=</span> <span class="fl">50</span><span class="op">)</span>,</span>
<span>  opportunity_col <span class="op">=</span> <span class="st">"schools"</span>,</span>
<span>  travel_cost_col <span class="op">=</span> <span class="st">"travel_time"</span></span>
<span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">df_linear</span><span class="op">)</span></span>
<span><span class="co">#&gt;                 id schools</span></span>
<span><span class="co">#&gt; 1: 89a88cdb57bffff   9.260</span></span>
<span><span class="co">#&gt; 2: 89a88cdb597ffff  18.748</span></span>
<span><span class="co">#&gt; 3: 89a88cdb5b3ffff  20.900</span></span>
<span><span class="co">#&gt; 4: 89a88cdb5cfffff  13.660</span></span>
<span><span class="co">#&gt; 5: 89a88cd909bffff  18.980</span></span>
<span><span class="co">#&gt; 6: 89a88cd90b7ffff  24.780</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="floating-catchment-accessibility">5.4 Floating catchment accessibility:<a class="anchor" aria-label="anchor" href="#floating-catchment-accessibility"></a>
</h3>
<p>The <code><a href="../reference/floating_catchment_area.html">floating_catchment_area()</a></code> functions provides users with floating catchment area (FCA) indicators that allow you to calculate accessibility accounting for the competition of resources. The use can use the parameter <code>fca_metric</code> to specify which indicator of the broad FCA family should be used. The package currently supports two FCA metrics.</p>
<div class="section level5">
<h5 id="sfca-2-step-floating-catchment-area">2SFCA: 2-Step Floating Catchment Area<a class="anchor" aria-label="anchor" href="#sfca-2-step-floating-catchment-area"></a>
</h5>
<p>2SFCA was the first accessibility metric in the floating catchment area family. It was originally proposed by Luo &amp; Wang <span class="citation">(Luo and Wang 2003)</span>.</p>
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">df</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/floating_catchment_area.html">floating_catchment_area</a></span><span class="op">(</span></span>
<span>  <span class="va">travel_matrix</span>,</span>
<span>  <span class="va">land_use_data</span>,</span>
<span>  fca_metric <span class="op">=</span> <span class="st">"2sfca"</span>,</span>
<span>  decay_function <span class="op">=</span> <span class="fu"><a href="../reference/decay_binary.html">decay_binary</a></span><span class="op">(</span>cutoff <span class="op">=</span> <span class="fl">50</span><span class="op">)</span>,</span>
<span>  opportunity_col <span class="op">=</span> <span class="st">"jobs"</span>,</span>
<span>  travel_cost_col <span class="op">=</span> <span class="st">"travel_time"</span>,</span>
<span>  competition_col <span class="op">=</span> <span class="st">"population"</span></span>
<span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">df</span><span class="op">)</span></span>
<span><span class="co">#&gt;                 id      jobs</span></span>
<span><span class="co">#&gt; 1: 89a88cdb57bffff 0.4357418</span></span>
<span><span class="co">#&gt; 2: 89a88cdb597ffff 0.3938630</span></span>
<span><span class="co">#&gt; 3: 89a88cdb5b3ffff 0.4589910</span></span>
<span><span class="co">#&gt; 4: 89a88cdb5cfffff 0.5469433</span></span>
<span><span class="co">#&gt; 5: 89a88cd909bffff 0.4358530</span></span>
<span><span class="co">#&gt; 6: 89a88cd90b7ffff 0.5271746</span></span></code></pre></div>
</div>
<div class="section level5">
<h5 id="bfca---balanced-floating-catchment-area">BFCA - Balanced Floating Catchment Area<a class="anchor" aria-label="anchor" href="#bfca---balanced-floating-catchment-area"></a>
</h5>
<p>The BFCA metric calculates accessibility accounting for competition effects while simultaneously correcting for issues of inflation of demand and service levels that are present in previous floating catchment area measures. It is the most recent FCA metric and it was originally proposed by Paez et al. <span class="citation">(Paez, Higgins, and Vivona 2019)</span> and named in Pereira et al. <span class="citation">(Pereira et al. 2021)</span>.</p>
<div class="sourceCode" id="cb11"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">df</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/floating_catchment_area.html">floating_catchment_area</a></span><span class="op">(</span></span>
<span>  <span class="va">travel_matrix</span>,</span>
<span>  <span class="va">land_use_data</span>,</span>
<span>  fca_metric <span class="op">=</span> <span class="st">"bfca"</span>,</span>
<span>  decay_function <span class="op">=</span> <span class="fu"><a href="../reference/decay_exponential.html">decay_exponential</a></span><span class="op">(</span>decay_value <span class="op">=</span> <span class="fl">0.5</span><span class="op">)</span>,</span>
<span>  opportunity_col <span class="op">=</span> <span class="st">"jobs"</span>,</span>
<span>  travel_cost_col <span class="op">=</span> <span class="st">"travel_time"</span>,</span>
<span>  competition_col <span class="op">=</span> <span class="st">"population"</span></span>
<span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">df</span><span class="op">)</span></span>
<span><span class="co">#&gt;                 id       jobs</span></span>
<span><span class="co">#&gt; 1: 89a88cdb57bffff 0.11894791</span></span>
<span><span class="co">#&gt; 2: 89a88cdb597ffff 0.24251324</span></span>
<span><span class="co">#&gt; 3: 89a88cdb5b3ffff 0.07459233</span></span>
<span><span class="co">#&gt; 4: 89a88cdb5cfffff 0.10470062</span></span>
<span><span class="co">#&gt; 5: 89a88cd909bffff 0.07549538</span></span>
<span><span class="co">#&gt; 6: 89a88cd90b7ffff 0.82935888</span></span></code></pre></div>
</div>
<div class="section level5">
<h5 id="visualize-results">Visualize results<a class="anchor" aria-label="anchor" href="#visualize-results"></a>
</h5>
<p>If you have a spatial data with the geometries of your origin/destination data set, you can easily <code>merge</code> it with the accessibility to map the results. Here is a quick example using <code>ggplot2</code>.</p>
<div class="sourceCode" id="cb12"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://ggplot2.tidyverse.org" class="external-link">ggplot2</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://r-spatial.github.io/sf/" class="external-link">sf</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://r-datatable.com" class="external-link">data.table</a></span><span class="op">)</span></span>
<span></span>
<span><span class="co"># load spatial data</span></span>
<span><span class="va">grid</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/system.file.html" class="external-link">system.file</a></span><span class="op">(</span><span class="st">"extdata/grid_bho.rds"</span>, package <span class="op">=</span> <span class="st">"accessibility"</span><span class="op">)</span></span>
<span><span class="va">grid</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/readRDS.html" class="external-link">readRDS</a></span><span class="op">(</span><span class="va">grid</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># merge accessibility output to spatial data</span></span>
<span><span class="va">df</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/merge.html" class="external-link">merge</a></span><span class="op">(</span><span class="va">grid</span>, <span class="va">cum_cutoff</span>, by.x<span class="op">=</span><span class="st">'id'</span>, by.y<span class="op">=</span><span class="st">'id'</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># for large data sets, this can be done much faster with `data.table` as follows:</span></span>
<span><span class="va">df2</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://Rdatatable.gitlab.io/data.table/reference/setDT.html" class="external-link">setDT</a></span><span class="op">(</span><span class="va">grid</span><span class="op">)</span><span class="op">[</span><span class="va">cum_cutoff</span>, on<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">'id'</span><span class="op">=</span><span class="st">'id'</span><span class="op">)</span>, <span class="va">schools</span> <span class="op">:=</span> <span class="va">i.schools</span><span class="op">]</span></span>
<span><span class="va">df2</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://r-spatial.github.io/sf/reference/sf.html" class="external-link">st_sf</a></span><span class="op">(</span><span class="va">df2</span>, crs <span class="op">=</span> <span class="fl">4326</span><span class="op">)</span></span>
<span><span class="co">#&gt; Warning: st_crs&lt;- : replacing crs does not reproject data; use st_transform for</span></span>
<span><span class="co">#&gt; that</span></span>
<span></span>
<span></span>
<span><span class="co"># plot</span></span>
<span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html" class="external-link">ggplot</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggsf.html" class="external-link">geom_sf</a></span><span class="op">(</span>data <span class="op">=</span> <span class="va">df2</span>, <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html" class="external-link">aes</a></span><span class="op">(</span>fill <span class="op">=</span> <span class="va">schools</span><span class="op">)</span>, color<span class="op">=</span><span class="cn">NA</span>, alpha<span class="op">=</span><span class="fl">0.9</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html" class="external-link">labs</a></span><span class="op">(</span>title <span class="op">=</span> <span class="st">'Education accessibility by transit in under 30 min.'</span>, </span>
<span>       fill<span class="op">=</span><span class="st">'Number of schhols\naccessible'</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/scale_viridis.html" class="external-link">scale_fill_viridis_c</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span> </span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggtheme.html" class="external-link">theme_void</a></span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<p><img src="accessibility_files/figure-html/unnamed-chunk-13-1.png" width="100%"></p>
<p>If you have any suggestions or want to report an error, please visit <a href="https://github.com/ipeaGIT/accessibility" class="external-link">the package GitHub page</a>.</p>
</div>
</div>
<div class="section level3">
<h3 id="references">References<a class="anchor" aria-label="anchor" href="#references"></a>
</h3>
<div id="refs" class="references">
<div id="ref-luo2003measures">
<p>Luo, Wei, and Fahui Wang. 2003. “Measures of Spatial Accessibility to Health Care in a GIS Environment: Synthesis and a Case Study in the Chicago Region.” <em>Environment and Planning B: Planning and Design</em> 30 (6): 865–84. <a href="https://doi.org/10.1068/b29120" class="external-link">https://doi.org/10.1068/b29120</a>.</p>
</div>
<div id="ref-paez2019demand">
<p>Paez, Antonio, Christopher D. Higgins, and Salvatore F. Vivona. 2019. “Demand and Level of Service Inflation in Floating Catchment Area (FCA) Methods.” Edited by Tayyab Ikram Shah. <em>PLOS ONE</em> 14 (6): e0218773. <a href="https://doi.org/10.1371/journal.pone.0218773" class="external-link">https://doi.org/10.1371/journal.pone.0218773</a>.</p>
</div>
<div id="ref-pereira2021geographic">
<p>Pereira, Rafael H. M., Carlos Kauê Vieira Braga, Luciana Mendes Servo, Bernardo Serra, Pedro Amaral, Nelson Gouveia, and Antonio Paez. 2021. “Geographic Access to COVID-19 Healthcare in Brazil Using a Balanced Float Catchment Area Approach.” <em>Social Science &amp; Medicine</em> 273 (March): 113773. <a href="https://doi.org/10.1016/j.socscimed.2021.113773" class="external-link">https://doi.org/10.1016/j.socscimed.2021.113773</a>.</p>
</div>
</div>
</div>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">

        <nav id="toc" data-toggle="toc"><h2 data-toc-skip>Contents</h2>
    </nav>
</div>

</div>



      <footer><div class="copyright">
  <p></p>
<p>Developed by Rafael H. M. Pereira, Daniel Herszenhut, Ipea - Institute for Applied Economic Research.</p>
</div>

<div class="pkgdown">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.5.</p>
</div>

      </footer>
</div>

  


  

  </body>
</html>
