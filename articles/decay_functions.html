<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Decay functions • accessibility</title>
<!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png">
<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png">
<link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png">
<link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png">
<link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png">
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><meta property="og:title" content="Decay functions">
<meta property="og:description" content="accessibility">
<meta property="og:image" content="/logo.png">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body data-spy="scroll" data-target="#toc">
    

    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">accessibility</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="">1.0.1.9000</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../articles/accessibility.html">Get started</a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/decay_functions.html">Decay functions</a>
    </li>
  </ul>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/ipeaGIT/accessibility/" class="external-link">
    <span class="fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1 data-toc-skip>Decay functions</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/ipeaGIT/accessibility/blob/HEAD/vignettes/decay_functions.Rmd" class="external-link"><code>vignettes/decay_functions.Rmd</code></a></small>
      <div class="hidden name"><code>decay_functions.Rmd</code></div>

    </div>

    
    
<p>Some functions of the <strong>accessibility</strong> package, such as
<code><a href="../reference/floating_catchment_area.html">floating_catchment_area()</a></code> and <code><a href="../reference/gravity.html">gravity()</a></code>, use
decay functions to continuously discount the weight of opportunities as
travel costs become larger. For convenience, the package ships with some
of the most frequently used functions in the accessibility literature,
which are discussed below. Additionally, users can pass custom functions
to convert travel costs into weights to be applied the opportunities,
which is discussed further down in this the vignette.</p>
<div class="section level2">
<h2 id="currently-available-decay-functions">Currently available decay functions<a class="anchor" aria-label="anchor" href="#currently-available-decay-functions"></a>
</h2>
<div class="section level3">
<h3 id="binary">Binary<a class="anchor" aria-label="anchor" href="#binary"></a>
</h3>
<p>Also known as the step decay function, it’s most commonly used in
cumulative opportunities measures.</p>
<p><span class="math display">\[
\begin{aligned}
  f(t_{ij})= \left\{
      \begin{array}{ll}
          1 &amp; \quad \text{for }t_{ij} \leq T \\
          0 &amp; \quad \text{for }t_{ij} &gt; T
      \end{array}
    \right.\\
\end{aligned}
\]</span></p>
<p>Where <span class="math inline">\(t_{ij}\)</span> is the travel cost
between origin <em>i</em> and destination <em>j</em>, and <span class="math inline">\(T\)</span> is the travel cost cutoff.</p>
</div>
<div class="section level3">
<h3 id="linear">Linear<a class="anchor" aria-label="anchor" href="#linear"></a>
</h3>
<p>Weights decay linearly until the travel cost cutoff is reached. From
this point onward weights assume the value of 0.</p>
<p><span class="math display">\[
\begin{aligned}
  f(t_{ij})= \left\{
      \begin{array}{ll}
          (1 - t_{ij}/ T) &amp; \quad \text{for }t_{ij} \leq T \\
          0 &amp; \quad \text{for }t_{ij} &gt; T
      \end{array}
    \right.\\
\end{aligned}
\]</span></p>
<p>Where <span class="math inline">\(t_{ij}\)</span> is the travel cost
between origin <em>i</em> and destination <em>j</em>, and <span class="math inline">\(T\)</span> is the travel cost cutoff.</p>
</div>
<div class="section level3">
<h3 id="negative-exponential">Negative exponential<a class="anchor" aria-label="anchor" href="#negative-exponential"></a>
</h3>
<p><span class="math display">\[
\begin{aligned}
  f(t_{ij})= e^{(-\beta t_{ij})}
\end{aligned}
\]</span></p>
<p>Where <span class="math inline">\(t_{ij}\)</span> is the travel cost
between origin <em>i</em> and destination <em>j</em>, and <span class="math inline">\(\beta\)</span> is the parameter that tells the
speed of decay.</p>
</div>
<div class="section level3">
<h3 id="inverse-power">Inverse power<a class="anchor" aria-label="anchor" href="#inverse-power"></a>
</h3>
<p><span class="math display">\[
\begin{aligned}
  f(t_{ij})= \left\{
      \begin{array}{ll}
          1 &amp; \quad \text{for } t_{ij}\leq 1 \\
          t_{ij}^{-\beta} &amp; \quad \text{for }t_{ij} &gt; 1
      \end{array}
    \right.\\
\end{aligned}
\]</span></p>
<p>Where <span class="math inline">\(t_{ij}\)</span> is the travel cost
between origin <em>i</em> and destination <em>j</em>, and <span class="math inline">\(\beta\)</span> is the parameter that tells the
speed of decay.</p>
</div>
<div class="section level3">
<h3 id="stepped">Stepped<a class="anchor" aria-label="anchor" href="#stepped"></a>
</h3>
<p>Similar to the binary function, but can take an arbitrary number of
steps. The current implementation assumes that values changes at each
step, instead of right after it.</p>
<p><span class="math display">\[
\begin{aligned}
  f(t_{ij})= \left\{
      \begin{array}{ll}
          1 &amp; \quad \text{for } t_{ij} \lt S_{1} \\
          v_{1} &amp; \quad \text{for } t_{ij} \lt S_{2} \\
          v_{2} &amp; \quad \text{for } t_{ij} \lt S_{3} \\
          ... \\
          v_{n-1} &amp; \quad \text{for } t_{ij} \lt S_{n} \\
          v_{n} &amp; \quad \text{otherwise} \\
      \end{array}
    \right.\\
\end{aligned}
\]</span></p>
<p>Where <span class="math inline">\(t_{ij}\)</span> is the travel cost
between origin <em>i</em> and destination <em>j</em>, <span class="math inline">\(n\)</span> is the total number of steps, <span class="math inline">\(S_{k}\)</span> is the travel cost cutoff that
delimits the <span class="math inline">\(k^{th}\)</span> step, and <span class="math inline">\(v_{k}\)</span> is the value that the decay
function assumes at the <span class="math inline">\(k^{th}\)</span>
step.</p>
<div class="section level4">
<h4 id="quick-demonstration">Quick demonstration<a class="anchor" aria-label="anchor" href="#quick-demonstration"></a>
</h4>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/ipeaGIT/accessibility" class="external-link">accessibility</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://r-datatable.com" class="external-link">data.table</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://ggplot2.tidyverse.org" class="external-link">ggplot2</a></span><span class="op">)</span></span>
<span></span>
<span><span class="va">binary</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/decay_binary.html">decay_binary</a></span><span class="op">(</span>cutoff <span class="op">=</span> <span class="fl">50</span><span class="op">)</span></span>
<span><span class="va">linear</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/decay_linear.html">decay_linear</a></span><span class="op">(</span>cutoff <span class="op">=</span> <span class="fl">50</span><span class="op">)</span></span>
<span><span class="va">negative_exp</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/decay_exponential.html">decay_exponential</a></span><span class="op">(</span>decay_value <span class="op">=</span> <span class="fl">0.2</span><span class="op">)</span></span>
<span><span class="va">inverse_power</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/decay_power.html">decay_power</a></span><span class="op">(</span>decay_value <span class="op">=</span> <span class="fl">0.2</span><span class="op">)</span></span>
<span><span class="va">stepped</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/decay_stepped.html">decay_stepped</a></span><span class="op">(</span>steps <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">30</span>, <span class="fl">60</span>, <span class="fl">90</span><span class="op">)</span>, weights <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0.66</span>, <span class="fl">0.33</span>, <span class="fl">0</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="va">travel_costs</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/seq.html" class="external-link">seq</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fl">100</span>, <span class="fl">0.1</span><span class="op">)</span></span>
<span></span>
<span><span class="va">weights</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://Rdatatable.gitlab.io/data.table/reference/data.table.html" class="external-link">data.table</a></span><span class="op">(</span></span>
<span>  minutes <span class="op">=</span> <span class="va">travel_costs</span>,</span>
<span>  binary <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/numeric.html" class="external-link">as.numeric</a></span><span class="op">(</span><span class="fu">binary</span><span class="op">(</span><span class="va">travel_costs</span><span class="op">)</span><span class="op">)</span>,</span>
<span>  linear <span class="op">=</span> <span class="fu">linear</span><span class="op">(</span><span class="va">travel_costs</span><span class="op">)</span>,</span>
<span>  negative_exp <span class="op">=</span> <span class="fu">negative_exp</span><span class="op">(</span><span class="va">travel_costs</span><span class="op">)</span>,</span>
<span>  inverse_power <span class="op">=</span> <span class="fu">inverse_power</span><span class="op">(</span><span class="va">travel_costs</span><span class="op">)</span>,</span>
<span>  stepped <span class="op">=</span> <span class="fu">stepped</span><span class="op">(</span><span class="va">travel_costs</span><span class="op">)</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="co"># reshape data to long format</span></span>
<span><span class="va">weights</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://Rdatatable.gitlab.io/data.table/reference/melt.data.table.html" class="external-link">melt</a></span><span class="op">(</span></span>
<span>  <span class="va">weights</span>,</span>
<span>  id.vars <span class="op">=</span> <span class="st">"minutes"</span>,</span>
<span>  variable.name <span class="op">=</span> <span class="st">"decay_function"</span>,</span>
<span>  value.name <span class="op">=</span> <span class="st">"weights"</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html" class="external-link">ggplot</a></span><span class="op">(</span><span class="va">weights</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_path.html" class="external-link">geom_line</a></span><span class="op">(</span></span>
<span>    <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html" class="external-link">aes</a></span><span class="op">(</span><span class="va">minutes</span>, <span class="va">weights</span>, color <span class="op">=</span> <span class="va">decay_function</span><span class="op">)</span>,</span>
<span>    show.legend <span class="op">=</span> <span class="cn">FALSE</span></span>
<span>  <span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/facet_wrap.html" class="external-link">facet_wrap</a></span><span class="op">(</span><span class="va">.</span> <span class="op">~</span> <span class="va">decay_function</span>, ncol <span class="op">=</span> <span class="fl">2</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggtheme.html" class="external-link">theme_minimal</a></span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<p><img src="decay_functions_files/figure-html/unnamed-chunk-2-1.png" width="80%"></p>
</div>
</div>
</div>
<div class="section level2">
<h2 id="using-a-custom-decay-function">Using a custom decay function<a class="anchor" aria-label="anchor" href="#using-a-custom-decay-function"></a>
</h2>
<p>Any function that takes a <code>numeric</code> vector of travel costs
and returns a <code>numeric</code> vector, with the same length of
input, of weights to be applied to the opportunities can be considered a
decay function.</p>
<p>Let’s say that we wanted to use a very simple decay function that
defines the weights as the multiplicative inverse of travel cost - i.e.
<span class="math inline">\(travel\_cost^{-1}\)</span>. We just have to
take care of the case when travel cost is less than 1, in which case the
function would return values greater than 1 and which we will replace
with 1, but otherwise the implementation is pretty simple:</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">my_decay</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">travel_cost</span><span class="op">)</span> <span class="op">{</span></span>
<span>  <span class="va">weights</span> <span class="op">&lt;-</span> <span class="fl">1</span> <span class="op">/</span> <span class="va">travel_cost</span></span>
<span>  <span class="va">weights</span><span class="op">[</span><span class="va">weights</span> <span class="op">&gt;</span> <span class="fl">1</span><span class="op">]</span> <span class="op">&lt;-</span> <span class="fl">1</span></span>
<span>  <span class="kw"><a href="https://rdrr.io/r/base/function.html" class="external-link">return</a></span><span class="op">(</span><span class="va">weights</span><span class="op">)</span></span>
<span><span class="op">}</span></span></code></pre></div>
<p>Given a <code>numeric</code> vector of travel costs, the function
returns a <code>numeric</code> vector of weights:</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">my_decay</span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0</span>, <span class="fl">0.5</span>, <span class="fl">1</span>, <span class="fl">2</span>, <span class="fl">5</span>, <span class="fl">10</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] 1.0 1.0 1.0 0.5 0.2 0.1</span></span></code></pre></div>
<p>Using this function to calculate accessibility is as easy as any of
the built-in decay functions:</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">data_dir</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/system.file.html" class="external-link">system.file</a></span><span class="op">(</span><span class="st">"extdata"</span>, package <span class="op">=</span> <span class="st">"accessibility"</span><span class="op">)</span></span>
<span></span>
<span><span class="va">travel_matrix</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/readRDS.html" class="external-link">readRDS</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/file.path.html" class="external-link">file.path</a></span><span class="op">(</span><span class="va">data_dir</span>, <span class="st">"travel_matrix.rds"</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="va">land_use_data</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/readRDS.html" class="external-link">readRDS</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/file.path.html" class="external-link">file.path</a></span><span class="op">(</span><span class="va">data_dir</span>, <span class="st">"land_use_data.rds"</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="va">custom_gravity</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/gravity.html">gravity</a></span><span class="op">(</span></span>
<span>  <span class="va">travel_matrix</span>,</span>
<span>  <span class="va">land_use_data</span>,</span>
<span>  opportunity <span class="op">=</span> <span class="st">"jobs"</span>,</span>
<span>  travel_cost <span class="op">=</span> <span class="st">"travel_time"</span>,</span>
<span>  decay_function <span class="op">=</span> <span class="va">my_decay</span></span>
<span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">custom_gravity</span><span class="op">)</span></span>
<span><span class="co">#&gt;                 id     jobs</span></span>
<span><span class="co">#&gt; 1: 89a88cdb57bffff 11210.42</span></span>
<span><span class="co">#&gt; 2: 89a88cdb597ffff 10775.77</span></span>
<span><span class="co">#&gt; 3: 89a88cdb5b3ffff 11480.25</span></span>
<span><span class="co">#&gt; 4: 89a88cdb5cfffff 12689.44</span></span>
<span><span class="co">#&gt; 5: 89a88cd909bffff 11361.66</span></span>
<span><span class="co">#&gt; 6: 89a88cd90b7ffff 12563.65</span></span></code></pre></div>
<p>In fact, we could achieve the exact same result as we did with our
custom function using <code>decay_power(1)</code>:</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">power_gravity</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/gravity.html">gravity</a></span><span class="op">(</span></span>
<span>  <span class="va">travel_matrix</span>,</span>
<span>  <span class="va">land_use_data</span>,</span>
<span>  opportunity <span class="op">=</span> <span class="st">"jobs"</span>,</span>
<span>  travel_cost <span class="op">=</span> <span class="st">"travel_time"</span>,</span>
<span>  decay_function <span class="op">=</span> <span class="fu"><a href="../reference/decay_power.html">decay_power</a></span><span class="op">(</span><span class="fl">1</span><span class="op">)</span></span>
<span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">power_gravity</span><span class="op">)</span></span>
<span><span class="co">#&gt;                 id     jobs</span></span>
<span><span class="co">#&gt; 1: 89a88cdb57bffff 11210.42</span></span>
<span><span class="co">#&gt; 2: 89a88cdb597ffff 10775.77</span></span>
<span><span class="co">#&gt; 3: 89a88cdb5b3ffff 11480.25</span></span>
<span><span class="co">#&gt; 4: 89a88cdb5cfffff 12689.44</span></span>
<span><span class="co">#&gt; 5: 89a88cd909bffff 11361.66</span></span>
<span><span class="co">#&gt; 6: 89a88cd90b7ffff 12563.65</span></span></code></pre></div>
<p>A small difference is that in the first example we passed
<code>my_decay</code> (the function <em>object</em>) to the
<code>decay_function</code> parameter, whereas in the second we passed
the function <em>call</em> <code>decay_power(1)</code>. That’s because
<code><a href="../reference/decay_power.html">decay_power()</a></code> (and the other built-in decay functions as
well) is actually a function “factory”: it’s a function that returns a
function, as we can see below:</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/decay_power.html">decay_power</a></span><span class="op">(</span><span class="fl">1</span><span class="op">)</span></span>
<span><span class="co">#&gt; function (travel_cost) </span></span>
<span><span class="co">#&gt; {</span></span>
<span><span class="co">#&gt;     weights &lt;- travel_cost^(-decay_value)</span></span>
<span><span class="co">#&gt;     weights[weights &gt; 1] &lt;- 1</span></span>
<span><span class="co">#&gt;     return(weights)</span></span>
<span><span class="co">#&gt; }</span></span>
<span><span class="co">#&gt; &lt;bytecode: 0x55e574985238&gt;</span></span>
<span><span class="co">#&gt; &lt;environment: 0x55e574835748&gt;</span></span></code></pre></div>
<p>This is because the built-in functions aim to be as generally used as
possible, so we have to able to use them with different parameters,
cutoffs, etc. In practice, every time we call these functions we create
another function that calculates travel costs exactly as we want.</p>
<p>When we create our own custom decay function, we don’t have to think
about general cases, just the cases that matter for us. Creating a
simple function that converts one vector into another, therefore,
suffices our needs. In both examples above, therefore, we’re passing a
function to <code>decay_function</code> - one we created ourselves and
another created by <code><a href="../reference/decay_power.html">decay_power()</a></code>.</p>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">

        <nav id="toc" data-toggle="toc"><h2 data-toc-skip>Contents</h2>
    </nav>
</div>

</div>



      <footer><div class="copyright">
  <p></p>
<p>Developed by Rafael H. M. Pereira, Daniel Herszenhut, Ipea - Institute for Applied Economic Research.</p>
</div>

<div class="pkgdown">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.7.</p>
</div>

      </footer>
</div>

  


  

  </body>
</html>
